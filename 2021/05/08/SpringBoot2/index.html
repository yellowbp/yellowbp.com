<!DOCTYPE html>
<html lang="zh-CN">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta http-equiv="Cache-Control" content="no-siteapp">
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
  <meta name="renderer" content="webkit">

  
  <title>SpringBoot2 | bp的Blog</title>

  <link rel="shortcut icon" href="/images/favicon.png">
  
  <meta name="description" content="SpringBoot2环境要求官方要求：  java8及以上 java -version查看版本   maven3.3+ mvn -version查看版本    什么是SpringBoot就是一个javaweb的开发框架，但他其实不是什么新的框架，它默认配置了很多框架的使用方式，就像maven整合了所有的jar包，spring boot整合了所有的框架 。 SpringBoot优点 创建独立Spr">
<meta name="keywords" content="Spring">
<meta property="og:type" content="article">
<meta property="og:title" content="SpringBoot2">
<meta property="og:url" content="https://yellowbp.github.io/2021/05/08/SpringBoot2/index.html">
<meta property="og:site_name" content="bp的Blog">
<meta property="og:description" content="SpringBoot2环境要求官方要求：  java8及以上 java -version查看版本   maven3.3+ mvn -version查看版本    什么是SpringBoot就是一个javaweb的开发框架，但他其实不是什么新的框架，它默认配置了很多框架的使用方式，就像maven整合了所有的jar包，spring boot整合了所有的框架 。 SpringBoot优点 创建独立Spr">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="https://springboot2images.oss-cn-guangzhou.aliyuncs.com/%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95%E7%BB%93%E6%9E%84%E5%9B%BE.png">
<meta property="og:updated_time" content="2021-06-01T13:36:32.546Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="SpringBoot2">
<meta name="twitter:description" content="SpringBoot2环境要求官方要求：  java8及以上 java -version查看版本   maven3.3+ mvn -version查看版本    什么是SpringBoot就是一个javaweb的开发框架，但他其实不是什么新的框架，它默认配置了很多框架的使用方式，就像maven整合了所有的jar包，spring boot整合了所有的框架 。 SpringBoot优点 创建独立Spr">
<meta name="twitter:image" content="https://springboot2images.oss-cn-guangzhou.aliyuncs.com/%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95%E7%BB%93%E6%9E%84%E5%9B%BE.png">

  <meta name="format-detection" content="telephone=no,email=no">
  <meta name="theme-color" content="#9C27B0">
  <meta name="description" content>
  <meta name="keywords" content=",Spring">

  <meta name="mobile-web-app-capable" content="yes">
  <meta name="application-name" content="bp的Blog">
  <meta name="msapplication-starturl" content="https://yellowbp.github.io/2021/05/08/SpringBoot2/">
  <meta name="msapplication-navbutton-color" content="#9C27B0">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-title" content="bp的Blog">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <link rel="apple-touch-icon" href="/images/favicon.png">

  
    <meta property="article:published_time" content="Sat May 08 2021 21:13:36 GMT+0800">
    <meta property="article:modified_time" content="Tue Jun 01 2021 21:36:32 GMT+0800">
  

  
    <link rel="canonical" href="https://yellowbp.github.io/2021/05/08/SpringBoot2/">
  

  <meta name="google-site-verification" content="fXjtlIfaDc_X-0P11rO3bEp1Nk4IKXphoJv0GqGZCco">
  <meta name="baidu-site-verification" content="I3t1wfwZvd">

  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create','UA-139531378-1','auto');ga('send','pageview');
</script>
  <script>
  var _hmt = _hmt || [];
  (function() {var hm = document.createElement('script');
  hm.src = 'https://hm.baidu.com/hm.js?1054d51c0b66f1d168829173682c8159';
  var s = document.getElementsByTagName('script')[0];
  s.parentNode.insertBefore(hm, s);
  })();
</script>
  

  <link rel="stylesheet" href="/css/mdui.css">
<link rel="stylesheet" href="/css/style.css">
</head>
<body class="mdui-appbar-with-toolbar mdui-drawer-body-left mdui-theme-primary-brown mdui-theme-accent-blue">
  <script>var a=localStorage.getItem("mdui-theme-layout-dark");if(a){document.getElementsByTagName("body")[0].className+=" mdui-theme-layout-dark"};</script>
  <header id="header" class="mdui-appbar mdui-appbar-fixed mdui-appbar-scroll-hide mdui-appbar-inset">
  <div class="mdui-toolbar mdui-color-theme">
    <a href="javascript:;" class="mdui-btn mdui-btn-icon" mdui-drawer="{target: '#sidebar', swipe: true}"><i class="mdui-icon material-icons">menu</i></a>
    <a href="/" class="mdui-typo-headline">bp的Blog</a>
    <div class="mdui-toolbar-spacer"></div>
    <a href="javascript:;" class="mdui-btn mdui-btn-icon" mdui-dialog="{target: '#search'}" mdui-tooltip="{content: '搜索'}"><i class="mdui-icon material-icons">search</i></a>
    
  </div>
</header>
<div class="mdui-dialog" id="search">
  
    <div class="search-form">
      <input type="search" class="search-form-input" placeholder="请输入关键字">
    </div>
    <div class="search-result" data-resource="/search.xml"></div>
  
</div>
  <aside id="sidebar" class="mdui-drawer mdui-drawer-full-height">
  <div class="mdui-grid-tile">
    <img src="/images/Gradient1.jpg" style="height: 160px;">
    <img src="/images/headPic.jpg" class="avatar-animation" style="position: absolute; top: 10%; left: 24px; width: 64px; height: 64px; border: 2px solid #fff; border-radius: 50%;">
    <div class="mdui-grid-tile-actions">
      <div class="mdui-grid-tile-text">
        <div class="mdui-grid-tile-title">hbp
        </div>
        <div class="mdui-grid-tile-subtitle"><i class="mdui-icon material-icons">art_track</i>要想快，先会慢</div>
      </div>
      
        <div class="mdui-grid-tile-buttons">
          <a href="mailto:347070556@qq.com" class="mdui-btn mdui-btn-icon" mdui-tooltip="{content: '347070556@qq.com'}"><i class="mdui-icon material-icons">email</i></a>
        </div>
      
    </div>
  </div>

  <div class="mdui-list" mdui-collapse="{accordion: true}">
    <a href="/" class="mdui-list-item mdui-ripple">
      <i class="mdui-list-item-icon mdui-icon material-icons mdui-text-color-blue">home</i>
      <div class="mdui-list-item-content">主页</div>
    </a>
    <div class="mdui-collapse-item">
      <div class="mdui-collapse-item-header mdui-list-item mdui-ripple">
        <i class="mdui-list-item-icon mdui-icon material-icons mdui-text-color-deep-orange">inbox</i>
        <div class="mdui-list-item-content">归档</div>
        <i class="mdui-collapse-item-arrow mdui-icon material-icons">keyboard_arrow_down</i>
      </div>
      <div class="mdui-collapse-item-body mdui-list mdui-list-dense">
        
        <a class="mdui-ripple sidebar_archives-link" href="/archives/2021/07/">七月 2021<span class="mdui-ripple sidebar_archives-count">13</span></a><a class="mdui-ripple sidebar_archives-link" href="/archives/2021/06/">六月 2021<span class="mdui-ripple sidebar_archives-count">4</span></a><a class="mdui-ripple sidebar_archives-link" href="/archives/2021/05/">五月 2021<span class="mdui-ripple sidebar_archives-count">5</span></a><a class="mdui-ripple sidebar_archives-link" href="/archives/2021/04/">四月 2021<span class="mdui-ripple sidebar_archives-count">2</span></a><a class="mdui-ripple sidebar_archives-link" href="/archives/2021/03/">三月 2021<span class="mdui-ripple sidebar_archives-count">5</span></a><a class="mdui-ripple sidebar_archives-link" href="/archives/2021/02/">二月 2021<span class="mdui-ripple sidebar_archives-count">5</span></a><a class="mdui-ripple sidebar_archives-link" href="/archives/2021/01/">一月 2021<span class="mdui-ripple sidebar_archives-count">2</span></a><a class="mdui-ripple sidebar_archives-link" href="/archives/2020/03/">三月 2020<span class="mdui-ripple sidebar_archives-count">3</span></a><a class="mdui-ripple sidebar_archives-link" href="/archives/2019/12/">十二月 2019<span class="mdui-ripple sidebar_archives-count">2</span></a><a class="mdui-ripple sidebar_archives-link" href="/archives/2019/11/">十一月 2019<span class="mdui-ripple sidebar_archives-count">5</span></a><a class="mdui-ripple sidebar_archives-link" href="/archives/2019/10/">十月 2019<span class="mdui-ripple sidebar_archives-count">3</span></a><a class="mdui-ripple sidebar_archives-link" href="/archives/2019/09/">九月 2019<span class="mdui-ripple sidebar_archives-count">3</span></a><a class="mdui-ripple sidebar_archives-link" href="/archives/2019/08/">八月 2019<span class="mdui-ripple sidebar_archives-count">6</span></a>
        
      </div>
    </div>
    <div class="mdui-collapse-item">
      <div class="mdui-collapse-item-header mdui-list-item mdui-ripple">
        <i class="mdui-list-item-icon mdui-icon material-icons mdui-text-color-green">chrome_reader_mode</i>
        <div class="mdui-list-item-content">分类</div>
        <i class="mdui-collapse-item-arrow mdui-icon material-icons">keyboard_arrow_down</i>
      </div>
      <div class="mdui-collapse-item-body mdui-list mdui-list-dense">
        
        <a class="mdui-ripple sidebar_archives-link" href="/categories/Spring/">Spring<span class="mdui-ripple sidebar_archives-count">2</span></a><a class="mdui-ripple sidebar_archives-link" href="/categories/Spring-Cloud-Alibaba/">Spring Cloud Alibaba<span class="mdui-ripple sidebar_archives-count">7</span></a><a class="mdui-ripple sidebar_archives-link" href="/categories/docker/">docker<span class="mdui-ripple sidebar_archives-count">1</span></a><a class="mdui-ripple sidebar_archives-link" href="/categories/git/">git<span class="mdui-ripple sidebar_archives-count">1</span></a><a class="mdui-ripple sidebar_archives-link" href="/categories/java基础/">java基础<span class="mdui-ripple sidebar_archives-count">1</span></a><a class="mdui-ripple sidebar_archives-link" href="/categories/linux/">linux<span class="mdui-ripple sidebar_archives-count">1</span></a><a class="mdui-ripple sidebar_archives-link" href="/categories/mybatis/">mybatis<span class="mdui-ripple sidebar_archives-count">1</span></a><a class="mdui-ripple sidebar_archives-link" href="/categories/redis/">redis<span class="mdui-ripple sidebar_archives-count">1</span></a><a class="mdui-ripple sidebar_archives-link" href="/categories/servlet/">servlet<span class="mdui-ripple sidebar_archives-count">1</span></a><a class="mdui-ripple sidebar_archives-link" href="/categories/基础/">基础<span class="mdui-ripple sidebar_archives-count">2</span></a><a class="mdui-ripple sidebar_archives-link" href="/categories/安全框架/">安全框架<span class="mdui-ripple sidebar_archives-count">1</span></a><a class="mdui-ripple sidebar_archives-link" href="/categories/工具类/">工具类<span class="mdui-ripple sidebar_archives-count">1</span></a><a class="mdui-ripple sidebar_archives-link" href="/categories/技术/">技术<span class="mdui-ripple sidebar_archives-count">24</span></a><a class="mdui-ripple sidebar_archives-link" href="/categories/搭建/">搭建<span class="mdui-ripple sidebar_archives-count">2</span></a><a class="mdui-ripple sidebar_archives-link" href="/categories/数据库/">数据库<span class="mdui-ripple sidebar_archives-count">4</span></a><a class="mdui-ripple sidebar_archives-link" href="/categories/服务器/">服务器<span class="mdui-ripple sidebar_archives-count">1</span></a><a class="mdui-ripple sidebar_archives-link" href="/categories/测试/">测试<span class="mdui-ripple sidebar_archives-count">1</span></a><a class="mdui-ripple sidebar_archives-link" href="/categories/电脑硬件/">电脑硬件<span class="mdui-ripple sidebar_archives-count">1</span></a><a class="mdui-ripple sidebar_archives-link" href="/categories/规范/">规范<span class="mdui-ripple sidebar_archives-count">2</span></a><a class="mdui-ripple sidebar_archives-link" href="/categories/部署/">部署<span class="mdui-ripple sidebar_archives-count">1</span></a><a class="mdui-ripple sidebar_archives-link" href="/categories/重装/">重装<span class="mdui-ripple sidebar_archives-count">1</span></a>
        
      </div>
    </div>
    <div class="mdui-collapse-item">
      <div class="mdui-collapse-item-header mdui-list-item mdui-ripple">
        <i class="mdui-list-item-icon mdui-icon material-icons mdui-text-color-brown">bookmark</i>
        <div class="mdui-list-item-content">标签</div>
        <i class="mdui-collapse-item-arrow mdui-icon material-icons">keyboard_arrow_down</i>
      </div>
      <div class="mdui-collapse-item-body mdui-list mdui-list-dense">
        
        <a class="mdui-ripple sidebar_archives-link" href="/tags/Spring/">Spring<span class="mdui-ripple sidebar_archives-count">7</span></a><a class="mdui-ripple sidebar_archives-link" href="/tags/algorithm/">algorithm<span class="mdui-ripple sidebar_archives-count">7</span></a><a class="mdui-ripple sidebar_archives-link" href="/tags/excel/">excel<span class="mdui-ripple sidebar_archives-count">4</span></a><a class="mdui-ripple sidebar_archives-link" href="/tags/git/">git<span class="mdui-ripple sidebar_archives-count">8</span></a><a class="mdui-ripple sidebar_archives-link" href="/tags/hexo/">hexo<span class="mdui-ripple sidebar_archives-count">1</span></a><a class="mdui-ripple sidebar_archives-link" href="/tags/javaWeb/">javaWeb<span class="mdui-ripple sidebar_archives-count">7</span></a><a class="mdui-ripple sidebar_archives-link" href="/tags/java基础/">java基础<span class="mdui-ripple sidebar_archives-count">3</span></a><a class="mdui-ripple sidebar_archives-link" href="/tags/linux/">linux<span class="mdui-ripple sidebar_archives-count">4</span></a><a class="mdui-ripple sidebar_archives-link" href="/tags/mysql/">mysql<span class="mdui-ripple sidebar_archives-count">4</span></a><a class="mdui-ripple sidebar_archives-link" href="/tags/nginx/">nginx<span class="mdui-ripple sidebar_archives-count">1</span></a><a class="mdui-ripple sidebar_archives-link" href="/tags/redis/">redis<span class="mdui-ripple sidebar_archives-count">1</span></a><a class="mdui-ripple sidebar_archives-link" href="/tags/servlet/">servlet<span class="mdui-ripple sidebar_archives-count">1</span></a><a class="mdui-ripple sidebar_archives-link" href="/tags/spring/">spring<span class="mdui-ripple sidebar_archives-count">1</span></a><a class="mdui-ripple sidebar_archives-link" href="/tags/win7/">win7<span class="mdui-ripple sidebar_archives-count">1</span></a><a class="mdui-ripple sidebar_archives-link" href="/tags/其他/">其他<span class="mdui-ripple sidebar_archives-count">1</span></a><a class="mdui-ripple sidebar_archives-link" href="/tags/分布式/">分布式<span class="mdui-ripple sidebar_archives-count">1</span></a><a class="mdui-ripple sidebar_archives-link" href="/tags/接口文档/">接口文档<span class="mdui-ripple sidebar_archives-count">2</span></a><a class="mdui-ripple sidebar_archives-link" href="/tags/笔记本选购/">笔记本选购<span class="mdui-ripple sidebar_archives-count">1</span></a><a class="mdui-ripple sidebar_archives-link" href="/tags/自动化构建工具/">自动化构建工具<span class="mdui-ripple sidebar_archives-count">1</span></a><a class="mdui-ripple sidebar_archives-link" href="/tags/设计模式/">设计模式<span class="mdui-ripple sidebar_archives-count">1</span></a>
        
      </div>
    </div>
    <a href="/about" class="mdui-list-item mdui-ripple">
      <i class="mdui-list-item-icon mdui-icon material-icons mdui-text-color-purple">person</i>
      <div class="mdui-list-item-content">关于</div>
    </a>
  </div>

  <div class="mdui-divider"></div>

  <div class="mdui-list" mdui-collapse="{accordion: true}">
    
    <div class="mdui-collapse-item">
      <div class="mdui-collapse-item-header mdui-list-item mdui-ripple">
        <div class="mdui-list-item-content">友情链接</div>
        <i class="mdui-list-item-icon mdui-icon material-icons">link</i>
      </div>
      <div class="mdui-collapse-item-body mdui-list mdui-list-dense">
        
        
          <a href="javascript:;" class="mdui-list-item mdui-ripple mdui-p-l-2 mdui-text-color-theme" style="justify-content: center;">链接为空</a>
        
      </div>
    </div>
  </div>
</aside>
  <main id="main" class="mdui-m-t-5 fadeIn animated">
  <link rel="stylesheet" href="https://cdn.bootcss.com/fancybox/3.5.7/jquery.fancybox.min.css">
  <style>#main article .mdui-card-content .center-block{display:block!important;margin-right:auto!important;margin-left:auto!important}</style>
  <article class="mdui-card mdui-m-b-5">
    <header class="mdui-card-media">
      <img src="/images/random/material-18.png" style="max-height: 240px;">
      <div class="mdui-card-media-covered">
        <div class="mdui-card-primary">
          <div class="mdui-card-primary-title">SpringBoot2</div>
          <div class="mdui-card-primary-subtitle"><i class="iconfont">&#xe697;</i> 2021-05-08 / 
          <i class="iconfont">&#xe601;</i> hbp
          <span id="busuanzi_container_page_pv">
            本文总阅读量<span id="busuanzi_value_page_pv"></span>次
          </span>
          </div>
        </div>
      </div>
      <div class="mdui-card-menu">
        
        
      </div>
    </header>
    <div class="mdui-card-content mdui-typo">
      <h1 id="SpringBoot2"><a href="#SpringBoot2" class="headerlink" title="SpringBoot2"></a>SpringBoot2</h1><h2 id="环境要求"><a href="#环境要求" class="headerlink" title="环境要求"></a>环境要求</h2><p>官方要求：</p>
<ol>
<li>java8及以上<ol>
<li>java -version查看版本</li>
</ol>
</li>
<li>maven3.3+<ol>
<li>mvn -version查看版本</li>
</ol>
</li>
</ol>
<h2 id="什么是SpringBoot"><a href="#什么是SpringBoot" class="headerlink" title="什么是SpringBoot"></a>什么是SpringBoot</h2><p>就是一个javaweb的开发框架，但他其实不是什么新的框架，它默认配置了很多框架的使用方式，就像maven整合了所有的jar包，spring boot整合了所有的框架 。</p>
<h2 id="SpringBoot优点"><a href="#SpringBoot优点" class="headerlink" title="SpringBoot优点"></a>SpringBoot优点</h2><ol>
<li>创建独立Spring应用</li>
<li>内嵌web服务器，比如说tomcat</li>
<li>自动starter依赖，简化构建配置，即不需要考虑每个依赖版本的兼容性问题及不需要一个一个导入依赖，比如只需要导入web-starter，就可以把这些依赖导入</li>
<li>自动配置Spring以及第三方功能</li>
<li>提供生产级别的监控、健康检查及外部化配置</li>
<li>无冗余代码生成、无需编写XML</li>
</ol>
<h2 id="SpringBoot缺点"><a href="#SpringBoot缺点" class="headerlink" title="SpringBoot缺点"></a>SpringBoot缺点</h2><ol>
<li>人称版本帝，迭代快，需要时刻关注变化</li>
<li>封装太深，内部原理复杂，不容易精通</li>
</ol>
<h2 id="HelloWorld-Demo"><a href="#HelloWorld-Demo" class="headerlink" title="HelloWorld-Demo"></a>HelloWorld-Demo</h2><h3 id="maven设置"><a href="#maven设置" class="headerlink" title="maven设置"></a>maven设置</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 让maven使用阿里云的镜像，这样下载依赖就会很快 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mirrors</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">mirror</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span>&gt;</span>nexus-aliyun<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mirrorOf</span>&gt;</span>central<span class="tag">&lt;/<span class="name">mirrorOf</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>Nexus aliyun<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://maven.aliyun.com/nexus/content/groups/public<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">mirror</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">mirrors</span>&gt;</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">&lt;!-- 让maven使用jdk1.8来进行项目的编译，这样就会避免一些逻辑开发中的问题 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">profiles</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">profile</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">id</span>&gt;</span>jdk-1.8<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">activation</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">activeByDefault</span>&gt;</span>true<span class="tag">&lt;/<span class="name">activeByDefault</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">jdk</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">jdk</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">activation</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">maven.compiler.source</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">maven.compiler.source</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">maven.compiler.target</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">maven.compiler.target</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">maven.compiler.compilerVersion</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">maven.compiler.compilerVersion</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;/<span class="name">profile</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">profiles</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="需求：浏览发送-hello请求，响应-Hello，Spring-Boot-2"><a href="#需求：浏览发送-hello请求，响应-Hello，Spring-Boot-2" class="headerlink" title="需求：浏览发送/hello请求，响应 Hello，Spring Boot 2"></a>需求：浏览发送/hello请求，响应 Hello，Spring Boot 2</h3><h3 id="项目创建"><a href="#项目创建" class="headerlink" title="项目创建"></a>项目创建</h3><ul>
<li><strong>项目创建方式一：</strong>使用Spring Initializr 的 Web页面创建项目<ul>
<li>打开<a href="https://start.spring.io/" target="_blank" rel="noopener">https://start.spring.io/</a></li>
<li>填写项目信息（包结构group、artifact项目名等）</li>
<li>点击”Generate Project“按钮生成项目并下载此项目</li>
<li>解压后，用IDEA以Maven项目导入</li>
</ul>
</li>
<li><strong>项目创建方式二：</strong>使用 IDEA 直接创建项目<ul>
<li>创建一个新项目，选择spring initalizr，它实际上就是去官网的快速构建工具那里实现的</li>
<li>填写项目信息</li>
<li>选择初始化组件（勾选web和lombok）</li>
<li>等待项目构建成功即可</li>
</ul>
</li>
</ul>
<h3 id="引入依赖"><a href="#引入依赖" class="headerlink" title="引入依赖"></a>引入依赖</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--固定写法，要使用springboot的功能，就要引入springboot的父项目--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.4.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--web场景启动器：开发web就需要引入web场景--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="创建主程序"><a href="#创建主程序" class="headerlink" title="创建主程序"></a>创建主程序</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* 主程序类：相当于所有启动的入口，这是个固定写法</span></span><br><span class="line"><span class="comment">* @SpringBootApplication：这是一个SpringBoot应用</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(Main<span class="class">.<span class="keyword">class</span>,<span class="title">args</span>)</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="编写业务"><a href="#编写业务" class="headerlink" title="编写业务"></a>编写业务</h3><p>这一块的话，以前怎么写业务，这里就怎么写</p>
<p>在主程序的同级目录下，新建一个controller包，<strong>一定要在同级目录下，否则识别不到</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"hello"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">handle</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"hello,SpringBoot2"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h3><p>直接运行main方法即可</p>
<h3 id="简化配置"><a href="#简化配置" class="headerlink" title="简化配置"></a>简化配置</h3><p>resources下创建application.properties</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">server.port=8888</span><br></pre></td></tr></table></figure>

<h3 id="简化部署"><a href="#简化部署" class="headerlink" title="简化部署"></a>简化部署</h3><p>以后不需要在目标服务器安装tomcat等一大推，只需要在工程里面引入一个插件，然后把项目打成jar包（点击 maven的 package）即可，如果打包成功，则会在target目录下生成一个 jar 包，然后直接在目标服务器执行，即可以在任何地方运行啦。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--打包插件--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>注意点：</p>
<ul>
<li>在cmd中运行jar包时要注意，取消cmd的快速编辑模式</li>
</ul>
<h2 id="SpringBoot特点"><a href="#SpringBoot特点" class="headerlink" title="SpringBoot特点"></a>SpringBoot特点</h2><h3 id="依赖管理"><a href="#依赖管理" class="headerlink" title="依赖管理"></a>依赖管理</h3><ul>
<li>父项目做依赖管理</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--一般父项目声明非常多的依赖，而子项目只需要继承这个父项目，子项目就可以不用写版本号--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.4.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--点进去，发现还有一个父依赖：几乎声明了所有开发中常用的依赖版本号，自动版本仲裁机制--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-dependencies<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.4.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>即我们无需关注版本号，自动版本仲裁</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1、引入依赖默认都可以不写版本</span><br><span class="line">2、但引入非版本仲裁的jar，要写</span><br></pre></td></tr></table></figure>

<ul>
<li>自定义修改仲裁的版本号(运行maven的特性：就近优先原则)</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1.先去查看spring-boot-dependencies里面规定当前依赖的版本</span><br><span class="line">2.在当前项目pom.xml里面重写配置 	</span><br><span class="line"><span class="tag">&lt;<span class="name">properties</span>&gt;</span>        </span><br><span class="line">    <span class="tag">&lt;<span class="name">mysql.version</span>&gt;</span>5.1.42<span class="tag">&lt;/<span class="name">mysql.version</span>&gt;</span>    </span><br><span class="line"><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>开发导入starter场景启动器。</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">    1、官方的spring-boot-starter-*，*就某种场景</span></span><br><span class="line"><span class="comment">    2、只要引入starter，这个场景的所有常规需要的依赖我们都自动引入</span></span><br><span class="line"><span class="comment">    3、springboot所有支持的场景，详见官方文档</span></span><br><span class="line"><span class="comment">    4、自己命名的 *-spring-boot-starter：第三方为我们提供的简化开发的场景启动器</span></span><br><span class="line"><span class="comment">    5、所有的场景启动器最底层的依赖都会这依赖这个：</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.4.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>compile<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="自动配置"><a href="#自动配置" class="headerlink" title="自动配置"></a>自动配置</h3><ul>
<li><p>自动配好tomcat</p>
<ul>
<li><p>引入tomcat依赖（web启动器已经引入了）</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span>    </span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span>    </span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-tomcat<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span>   </span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.4.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span>    </span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>compile<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>自动配好SpringMVC</p>
<ul>
<li>引入springmvc开发的全套组件（web启动器已经引入了）</li>
<li>自动配好了springmvc常用组件(功能)，如视图解析器，文件上传解析器</li>
<li>可以通过在主程序中获取ioc的容器查看,SpringApplication.run是有返回参数的</li>
</ul>
</li>
<li><p>自动配好Web常见功能，如字符编码问题</p>
<ul>
<li>SpringBoot帮我们配置好了所有web开发的常见场景</li>
</ul>
</li>
<li><p>默认的包结构</p>
<ul>
<li><p>无需配置以前的包扫描配置，如我们之前整合spring-springmvc时，我们需要指定我们的controller在哪个包下，并对这个包进行扫描</p>
</li>
<li><p><strong>主程序所在的包及其下面所有子包里面的组件都会被默认扫描进来</strong>（这里主程序所在包是指 MainApplication 所在的层级）</p>
</li>
<li><p>想要扩大扫描包的范围：@SpringBootApplication(scanBasePackages = “com.hbp”)</p>
<p>或@ComponentScan(“扫描指定的路径”)，但是@ComponentScan不与@SpringBootApplication兼容，因为@SpringBootApplication里面已经有了@ComponentScan</p>
</li>
<li><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line">等同于</span><br><span class="line"><span class="meta">@SpringBootConfiguration</span></span><br><span class="line"><span class="meta">@EnableAutoConfiguration</span></span><br><span class="line"><span class="meta">@ComponentScan</span>(<span class="string">"扫描指定的路径"</span>)</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>各种配置拥有默认值</p>
<ul>
<li>默认配置最终都是映射到xxxProperties</li>
<li>配置文件的值最终会绑定某个类上，这个类会在容器中创建对象</li>
</ul>
</li>
<li><p>按需加载所有自动配置项</p>
<ul>
<li>引入了哪些场景这个场景的自动配置才会开启    </li>
<li>SpringBoot所有的自动配置功能都在 spring-boot-autoconfigure 包里面</li>
</ul>
</li>
<li><p>….</p>
</li>
</ul>
<h2 id="容器功能"><a href="#容器功能" class="headerlink" title="容器功能"></a>容器功能</h2><h3 id="组件的添加"><a href="#组件的添加" class="headerlink" title="组件的添加"></a>组件的添加</h3><h4 id="Configuration"><a href="#Configuration" class="headerlink" title="@Configuration"></a>@Configuration</h4><p><strong>Full模式与Lite模式(默认为full)</strong></p>
<ul>
<li>Full(proxyBeanMethods = true)：保证每个@Bean方法被调用多少次返回的组件都是单实例的</li>
<li>Lite(proxyBeanMethods = false)：每个@Bean方法被调用多少次返回的组件都是新创建的</li>
<li>通俗的理解：这里的true=单例，去容器中找；而false=多例</li>
<li>组件依赖(即一个对象中引入了另一对象)必须使用Full模式默认。其他默认使用Lite模式</li>
<li>这两个模式也涉及到性能的问题，full模式使用的时候都需要检查容器中是否含有此组件，而lite不需要检查，则性能上比full略胜一筹。</li>
</ul>
<p>实例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**#############################Configuration使用示例############################## </span></span><br><span class="line"><span class="comment">* 1、配置类里面使用<span class="doctag">@Bean</span>标注在方法上给容器注册组件，默认是单例的 </span></span><br><span class="line"><span class="comment">* 2、配置类本身也是组件 </span></span><br><span class="line"><span class="comment">* 3、proxyBeanMethods:代理bean的方法，默认为true</span></span><br><span class="line"><span class="comment">* 	Full(proxyBeanMethods = true)、【保证每个<span class="doctag">@Bean</span>方法被调用多少次返回的组件都是单实例的】 </span></span><br><span class="line"><span class="comment">* 	Lite(proxyBeanMethods = false)【每个<span class="doctag">@Bean</span>方法被调用多少次返回的组件都是新创建的，即多实例】 </span></span><br><span class="line"><span class="comment">* 组件依赖必须使用Full模式默认。其他默认是否Lite模式</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//告诉SpringBoot这是一个配置类 == 之前写的配置文件xxx.xml </span></span><br><span class="line"><span class="meta">@Configuration</span>(proxyBeanMethods = <span class="keyword">true</span>) </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyConfig</span> </span>&#123;    </span><br><span class="line">    <span class="comment">/** </span></span><br><span class="line"><span class="comment">    * 之前是用bean标签，现在是用Bean注解    </span></span><br><span class="line"><span class="comment">    * 作用：给容器中添加组件    </span></span><br><span class="line"><span class="comment">    * 以方法名作为组件的id(可以在注解上修改)。返回类型就是组件类型。返回的值就是组件在容器中的实例(单例)    </span></span><br><span class="line"><span class="comment">    * 等同于：    </span></span><br><span class="line"><span class="comment">    * &lt;bean id="user01" class="com.hbp.boot.bean.User"&gt;        </span></span><br><span class="line"><span class="comment">    * 	&lt;property name="name" value="张三"/&gt;        </span></span><br><span class="line"><span class="comment">    * 	&lt;property name="age" value="18"/&gt;      </span></span><br><span class="line"><span class="comment">    * &lt;/bean&gt;    </span></span><br><span class="line"><span class="comment">    */</span>    </span><br><span class="line">    <span class="comment">//外部无论对配置类中的这个组件注册方法调用多少次获取的都是之前注册容器的单实例对象   </span></span><br><span class="line">    <span class="meta">@Bean</span>    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">user01</span><span class="params">()</span></span>&#123;        </span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> User(<span class="string">"zhangsan"</span>,<span class="number">18</span>);    </span><br><span class="line">    &#125;    </span><br><span class="line">    <span class="meta">@Bean</span>(<span class="string">"tom"</span>)    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> Pet <span class="title">tomcat</span><span class="params">()</span></span>&#123;        </span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Pet(<span class="string">"tomcat"</span>);    </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>主程序测试：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** 主程序类：相当于所有启动的入口</span></span><br><span class="line"><span class="comment">* <span class="doctag">@SpringBootApplication</span>：这是一个SpringBoot应用 </span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span>(scanBasePackages = <span class="string">"com.hbp"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;        </span><br><span class="line">        <span class="comment">//1、返回我们IOC容器        </span></span><br><span class="line">        ConfigurableApplicationContext run = SpringApplication.run(Main<span class="class">.<span class="keyword">class</span>, <span class="title">args</span>)</span>;        </span><br><span class="line">        <span class="comment">//2、查看容器里面的组件        </span></span><br><span class="line">        String[] names = run.getBeanDefinitionNames();        </span><br><span class="line">        <span class="keyword">for</span> (String name : names) &#123;            </span><br><span class="line">            System.out.println(name);        </span><br><span class="line">        &#125;        </span><br><span class="line">        <span class="comment">//从容器中获取组件        </span></span><br><span class="line">        Pet tom01 = run.getBean(<span class="string">"tom"</span>, Pet<span class="class">.<span class="keyword">class</span>)</span>;        </span><br><span class="line">        Pet tom02 = run.getBean(<span class="string">"tom"</span>, Pet<span class="class">.<span class="keyword">class</span>)</span>;        </span><br><span class="line">        System.out.println(tom01 == tom02);<span class="comment">//运行结果:true        </span></span><br><span class="line">        <span class="comment">//配置类也是组件        </span></span><br><span class="line">        <span class="comment">//com.hbp.boot.config.MyConfig$$EnhancerBySpringCGLIB$$e41e76f3@30e92cb9        </span></span><br><span class="line">        <span class="comment">//默认也是个代理对象        </span></span><br><span class="line">        MyConfig bean = run.getBean(MyConfig<span class="class">.<span class="keyword">class</span>)</span>;        </span><br><span class="line">        System.out.println(bean);<span class="comment">//运行结果：如果是full模式则为true；如果是lite模式则为false        </span></span><br><span class="line">        <span class="comment">// 如果@Configuration(proxyBeanMethods = true)代理对象调用方法，        </span></span><br><span class="line">        <span class="comment">// SpringBoot总会去容器中检查有没有这个方法，        </span></span><br><span class="line">        <span class="comment">// 如果有就拿，没有就新创一个。        </span></span><br><span class="line">        <span class="comment">// 即SpringBoot总会检查这个组件是否在容器中有，保持组件单实例        </span></span><br><span class="line">        User user01 = bean.user01();        </span><br><span class="line">        User user02 = bean.user01();        </span><br><span class="line">        System.out.println(user01 == user02);    </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="Bean、-Component、-Controller、-Service、-Repository"><a href="#Bean、-Component、-Controller、-Service、-Repository" class="headerlink" title="@Bean、@Component、@Controller、@Service、@Repository"></a>@Bean、@Component、@Controller、@Service、@Repository</h4><p>这些都是标记为组件的意思</p>
<h4 id="ComponentScan、-Import"><a href="#ComponentScan、-Import" class="headerlink" title="@ComponentScan、@Import"></a>@ComponentScan、@Import</h4><p>@Import：只要是容器中的组件都能用</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* 给容器中自动创建出这两个类型的组件、默认组件的名字就是全类名</span></span><br><span class="line"><span class="comment">* <span class="doctag">@Import</span>(&#123;User.class&#125;)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">@Import</span>(&#123;User<span class="class">.<span class="keyword">class</span>&#125;)</span></span><br><span class="line"><span class="class">@<span class="title">Configuration</span>(<span class="title">proxyBeanMethods</span> </span>= <span class="keyword">false</span>) <span class="comment">//告诉SpringBoot这是一个配置类 == 配置文件</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyConfig</span> </span>&#123;&#125;</span><br></pre></td></tr></table></figure>

<h4 id="Conditional"><a href="#Conditional" class="headerlink" title="@Conditional"></a>@Conditional</h4><p>条件装配：满足Conditional指定的条件，则进行组件注入</p>
<p>示例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ConditionalOnBean</span>(name = <span class="string">"tom"</span>)<span class="comment">//当容器中有tom组件的时候，修饰的东西才生效 </span></span><br><span class="line"><span class="meta">@Configuration</span>(proxyBeanMethods = <span class="keyword">true</span>) </span><br><span class="line">文件<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyConfig</span> </span>&#123;</span><br><span class="line">    <span class="comment">//@ConditionalOnBean(name = "tom") //当容器中有tom组件的时候，修饰的东西才生效   </span></span><br><span class="line">    <span class="meta">@Bean</span>    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">user01</span><span class="params">()</span></span>&#123;        </span><br><span class="line">        User zhangsan = <span class="keyword">new</span> User(<span class="string">"zhangsan"</span>, <span class="number">18</span>);        </span><br><span class="line">        <span class="comment">//user组件依赖了Pet组件        </span></span><br><span class="line">        zhangsan.setPet(tomcatPet());        </span><br><span class="line">        <span class="keyword">return</span> zhangsan;    </span><br><span class="line">    &#125;    </span><br><span class="line">    <span class="meta">@Bean</span>(<span class="string">"tom22"</span>)    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> Pet <span class="title">tomcatPet</span><span class="params">()</span></span>&#123;        </span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Pet(<span class="string">"tomcat"</span>);    </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;       </span><br><span class="line">        <span class="comment">//1、返回我们IOC容器        </span></span><br><span class="line">        ConfigurableApplicationContext run = SpringApplication.run(Main<span class="class">.<span class="keyword">class</span>, <span class="title">args</span>)</span>;        </span><br><span class="line">   </span><br><span class="line">        <span class="keyword">boolean</span> tom = run.containsBean(<span class="string">"tom"</span>);        </span><br><span class="line">        System.out.println(<span class="string">"容器中Tom組件:"</span>+tom);        </span><br><span class="line">        <span class="keyword">boolean</span> user01 = run.containsBean(<span class="string">"user01"</span>);  </span><br><span class="line">        System.out.println(user01);   </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="原生配置文件的引入"><a href="#原生配置文件的引入" class="headerlink" title="原生配置文件的引入"></a>原生配置文件的引入</h3><p>目前有很多的老项目，仍用着xxx.xml的方式，而importResource的作用就是把xml的东西放入容器里面。不用一个个@Bean</p>
<h4 id="ImportResource"><a href="#ImportResource" class="headerlink" title="@ImportResource"></a>@ImportResource</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">======================beans.xml=========================</span><br><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span>       <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span>       <span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span>       <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context https://www.springframework.org/schema/context/spring-context.xsd"</span>&gt;</span>    </span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"haha"</span> <span class="attr">class</span>=<span class="string">"com.atguigu.boot.bean.User"</span>&gt;</span>        </span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"name"</span> <span class="attr">value</span>=<span class="string">"zhangsan"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span>        </span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"age"</span> <span class="attr">value</span>=<span class="string">"18"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span>    </span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span>    </span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"hehe"</span> <span class="attr">class</span>=<span class="string">"com.atguigu.boot.bean.Pet"</span>&gt;</span>        </span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"name"</span> <span class="attr">value</span>=<span class="string">"tomcat"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span>    </span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ImportResource</span>(<span class="string">"classpath:beans.xml"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyConfig</span> </span>&#123;&#125;</span><br><span class="line">======================测试=================        </span><br><span class="line">    <span class="keyword">boolean</span> haha = run.containsBean(<span class="string">"haha"</span>);</span><br><span class="line">    <span class="keyword">boolean</span> hehe = run.containsBean(<span class="string">"hehe"</span>);</span><br><span class="line">    System.out.println(<span class="string">"haha："</span>+haha);<span class="comment">//true</span></span><br><span class="line">    System.out.println(<span class="string">"hehe："</span>+hehe);<span class="comment">//true</span></span><br></pre></td></tr></table></figure>

<h3 id="配置绑定"><a href="#配置绑定" class="headerlink" title="配置绑定"></a>配置绑定</h3><p>如何使用Java读取到properties文件中的内容，并且把它封装到JavaBean中，以供随时使用；</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//以前的做法</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">getProperties</span> </span>&#123;     </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> FileNotFoundException, IOException </span>&#123;         </span><br><span class="line">        Properties pps = <span class="keyword">new</span> Properties();         </span><br><span class="line">        pps.load(<span class="keyword">new</span> FileInputStream(<span class="string">"a.properties"</span>));         </span><br><span class="line">        Enumeration enum1 = pps.propertyNames();</span><br><span class="line">        <span class="comment">//得到配置文件的名字         </span></span><br><span class="line">        <span class="keyword">while</span>(enum1.hasMoreElements()) &#123;           </span><br><span class="line">            String strKey = (String) enum1.nextElement();    </span><br><span class="line">            String strValue = pps.getProperty(strKey);            </span><br><span class="line">            System.out.println(strKey + <span class="string">"="</span> + strValue);            </span><br><span class="line">            <span class="comment">//...封装到JavaBean。         </span></span><br><span class="line">        &#125;     </span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>现在使用注解的方式：</p>
<h4 id="Component-ConfigurationProperties-prefix-“xxx”"><a href="#Component-ConfigurationProperties-prefix-“xxx”" class="headerlink" title="@Component + @ConfigurationProperties(prefix = “xxx”)"></a>@Component + @ConfigurationProperties(prefix = “xxx”)</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//只有在容器中的组件，才会拥有SpringBoot提供的强大功能</span></span><br><span class="line"><span class="comment">//如果是有第三方的包里面的，人家没有@Component，那样就得用下面的方法了</span></span><br><span class="line"><span class="meta">@Component</span> </span><br><span class="line"><span class="meta">@ConfigurationProperties</span>(prefix = <span class="string">"mycar"</span>)</span><br><span class="line"><span class="comment">//默认是去application.properites找</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Car</span> </span>&#123;    </span><br><span class="line">    <span class="keyword">private</span> String brand;    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> price;    </span><br><span class="line">    <span class="comment">//get set方法</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">myCar.brand=BYD</span><br><span class="line">myCar.price=100</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line">Car car;</span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/car"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> Car <span class="title">car</span><span class="params">()</span></span>&#123;    </span><br><span class="line">    <span class="keyword">return</span> car;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="EnableConfigurationProperties-ConfigurationProperties-prefix-“xxx”"><a href="#EnableConfigurationProperties-ConfigurationProperties-prefix-“xxx”" class="headerlink" title="@EnableConfigurationProperties + @ConfigurationProperties(prefix = “xxx”)"></a>@EnableConfigurationProperties + @ConfigurationProperties(prefix = “xxx”)</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@EnableConfigurationProperties</span>(Car<span class="class">.<span class="keyword">class</span>)</span></span><br><span class="line"><span class="class">//这个注解得加在配置类中</span></span><br><span class="line"><span class="class">//作用是：</span></span><br><span class="line"><span class="class">//1.开启<span class="title">car</span>配置绑定功能</span></span><br><span class="line"><span class="class">//2.把这个<span class="title">Car</span>组件自动注册到容器中</span></span><br><span class="line"><span class="class"><span class="title">public</span> <span class="title">class</span> <span class="title">MyConfig</span> </span>&#123;&#125;</span><br></pre></td></tr></table></figure>

<h2 id="最佳实践"><a href="#最佳实践" class="headerlink" title="最佳实践"></a>最佳实践</h2><ul>
<li><p>引入场景依赖</p>
</li>
<li><ul>
<li><a href="https://docs.spring.io/spring-boot/docs/current/reference/html/using-spring-boot.html#using-boot-starter" target="_blank" rel="noopener">https://docs.spring.io/spring-boot/docs/current/reference/html/using-spring-boot.html#using-boot-starter</a></li>
</ul>
</li>
<li><p>查看自动配置了哪些（选做）</p>
</li>
<li><ul>
<li>自己分析，引入场景对应的自动配置一般都生效了</li>
<li>配置文件中debug=true开启自动配置报告。Negative（不生效）\Positive（生效）</li>
</ul>
</li>
<li><p>是否需要修改</p>
</li>
<li><ul>
<li>参照文档修改配置项</li>
</ul>
</li>
<li><ul>
<li><ul>
<li><a href="https://docs.spring.io/spring-boot/docs/current/reference/html/appendix-application-properties.html#common-application-properties" target="_blank" rel="noopener">https://docs.spring.io/spring-boot/docs/current/reference/html/appendix-application-properties.html#common-application-properties</a></li>
<li>自己分析。xxxxProperties绑定了配置文件的哪些。（查看External Libraries 中的spring-boot-autoconfigurer中去对应查找）</li>
</ul>
</li>
</ul>
</li>
<li><ul>
<li>自定义加入或者替换组件</li>
</ul>
</li>
<li><ul>
<li><ul>
<li>@Bean、@Component。。。</li>
</ul>
</li>
</ul>
</li>
<li><ul>
<li>自定义器  XXXXXCustomizer；</li>
</ul>
</li>
</ul>
<h2 id="配置文件"><a href="#配置文件" class="headerlink" title="配置文件"></a>配置文件</h2><h3 id="文件类型"><a href="#文件类型" class="headerlink" title="文件类型"></a>文件类型</h3><h4 id="properties"><a href="#properties" class="headerlink" title="properties"></a>properties</h4><p>同以前的properties用法</p>
<h4 id="1-2、yaml"><a href="#1-2、yaml" class="headerlink" title="1.2、yaml"></a>1.2、yaml</h4><h5 id="1-2-1、简介"><a href="#1-2-1、简介" class="headerlink" title="1.2.1、简介"></a>1.2.1、简介</h5><p>YAML 是 “YAML Ain’t Markup Language”（YAML 不是一种标记语言）的递归缩写。在开发的这种语言时，YAML 的意思其实是：”Yet Another Markup Language”（仍是一种标记语言）。 </p>
<p>非常适合用来做以数据为中心的配置文件</p>
<h5 id="1-2-2、基本语法"><a href="#1-2-2、基本语法" class="headerlink" title="1.2.2、基本语法"></a>1.2.2、基本语法</h5><ul>
<li><p>key: value；冒号后面要有空格</p>
</li>
<li><p>大小写敏感</p>
</li>
<li><p>使用缩进表示层级关系</p>
</li>
<li><p>缩进不允许使用tab，只允许空格</p>
</li>
<li><p>缩进的空格数不重要，只要相同层级的元素左对齐即可</p>
</li>
<li><p>‘#’表示注释</p>
</li>
<li><p>字符串无需加引号，如果要加，单引号与双引号表示字符串内容会被 转义/不转义</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">userName:</span> <span class="string">"zhangsan \n lisi"</span><span class="comment"># 单引号会将\n作为字符串输出  双引号会将\n作为换行输出        \\n                         \n</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
<h5 id="1-2-3、数据类型"><a href="#1-2-3、数据类型" class="headerlink" title="1.2.3、数据类型"></a>1.2.3、数据类型</h5><ul>
<li><p>字面量：单个的、不可再分的值。date、boolean、string、number、null</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">k:</span> <span class="string">v</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>对象：键值对的集合。map、hash、object </p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">行内写法：</span>  <span class="attr">k:</span> <span class="string">&#123;k1:v1,k2:v2,k3:v3&#125;#或k:</span>   <span class="attr">k1: v1  k2: v2  k3:</span> <span class="string">v3</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>数组：一组按次序排列的值。array、list、set、queue</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">行内写法：</span>  <span class="attr">k:</span> <span class="string">[v1,v2,v3]#或者k:</span> <span class="bullet">-</span> <span class="string">v1</span> <span class="bullet">-</span> <span class="string">v2</span> <span class="bullet">-</span> <span class="string">v3</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
<h5 id="1-2-4-示例"><a href="#1-2-4-示例" class="headerlink" title="1.2.4 示例"></a>1.2.4 示例</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span><span class="meta">@ConfigurationProperties</span>(prefix = <span class="string">"person"</span>)<span class="meta">@NoArgsConstructor</span><span class="meta">@AllArgsConstructor</span><span class="meta">@Datapublic</span> <span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;    <span class="keyword">private</span> String userName;    <span class="keyword">private</span> Boolean boss;    <span class="keyword">private</span> Date birth;    <span class="keyword">private</span> Integer age;    <span class="keyword">private</span> Pet pet;    <span class="keyword">private</span> String[] interests;    <span class="keyword">private</span> List&lt;String&gt; animal;    <span class="keyword">private</span> Map&lt;String, Object&gt; score;    <span class="keyword">private</span> Set&lt;Double&gt; salarys;    <span class="keyword">private</span> Map&lt;String, List&lt;Pet&gt;&gt; allPets;&#125;<span class="meta">@Data</span><span class="meta">@NoArgsConstructor</span><span class="meta">@AllArgsConstructorpublic</span> <span class="class"><span class="keyword">class</span> <span class="title">Pet</span> </span>&#123;    <span class="keyword">private</span> String name;    <span class="keyword">private</span> Double weight;&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">person:  userName:</span> <span class="string">"zhangsan \n lisi"</span>  <span class="comment"># 单引号会将\n作为字符串输出  双引号会将\n作为换行输出  boss: false  birth: 2021/4/20 11:33:11  age: 18  pet:    name: tomcat    weight: 22  interests: [唱,跳,rap]  animal:  - jerry  - mario  #  score: &#123;English:88,Math:90&#125;  score:    English: 88    Math: 90  salarys:  - 99.99  allPets:    sick:    - &#123;name:阿狗,weight:99&#125;    - name: 阿猫      weight: 88    health:      [&#123;name: mario,weight: 47&#125;]</span></span><br></pre></td></tr></table></figure>

<h3 id="配置提示"><a href="#配置提示" class="headerlink" title="配置提示"></a>配置提示</h3><p>我们可以发现我们在发yaml的时候，并没有给我们提示，这造成了一定程度上的不便，我们可以加上配置处理器解决这个问题</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--配置处理器--&gt;</span><span class="tag">&lt;<span class="name">dependency</span>&gt;</span>    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span>    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-configuration-processor<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span>    <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span><span class="tag">&lt;<span class="name">build</span>&gt;</span>        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span>            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span>                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span>                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span>                <span class="tag">&lt;<span class="name">configuration</span>&gt;</span>                     <span class="comment">&lt;!--这一块是打包的时候，可以把配置处理器忽略掉，不要打包，减少jar包大小，因为这个是跟业务无关的东西，只是在开发时的提示，只会占空间，不过现在的版本2.4.2+会默认帮我们去掉，所以可以不用加--&gt;</span>                    <span class="tag">&lt;<span class="name">excludes</span>&gt;</span>                        <span class="tag">&lt;<span class="name">exclude</span>&gt;</span>                            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span>                            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-configuration-processor<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span>                        <span class="tag">&lt;/<span class="name">exclude</span>&gt;</span>                    <span class="tag">&lt;/<span class="name">excludes</span>&gt;</span>                <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span>            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span>        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span>    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="简单功能分析"><a href="#简单功能分析" class="headerlink" title="简单功能分析"></a>简单功能分析</h2><h3 id="静态资源访问"><a href="#静态资源访问" class="headerlink" title="静态资源访问"></a>静态资源访问</h3><h4 id="1、静态资源目录"><a href="#1、静态资源目录" class="headerlink" title="1、静态资源目录"></a>1、静态资源目录</h4><p>只要静态资源放在类路径(resources)下： called <code>/static</code> (or <code>/public</code> or <code>/resources</code> or <code>/META-INF/resources</code></p>
<p>访问方式 ： 当前项目根路径/ + 静态资源名 </p>
<p>那么有个问题：程序如何知道我想访问的是静态资源还是访问请求呢？</p>
<p>请求进来，先去找Controller看能不能处理。不能处理的所有请求又都交给静态资源处理器。静态资源也找不到则响应404页面。</p>
<p><strong>改变默认存放的静态资源路径</strong></p>
<p>相当于程序不会在去/static、/public、/resources、/META-INF/resources找静态资源了</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 配置存放的静态资源路径web:  resources:    static-locations: [classpath:/haha/]</span></span><br></pre></td></tr></table></figure>

<p><strong>改变静态资源访问前缀</strong></p>
<p>默认无前缀</p>
<p>访问方式：当前项目/ + static-path-pattern/ + 静态资源名 = 静态资源文件夹下找</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 配置静态资源的访问前缀spring:  mvc:    static-path-pattern: /res/**</span></span><br></pre></td></tr></table></figure>

<p><strong>为什么要改变默认的静态资源路径</strong></p>
<p>因为一个web应用，有请求和静态资源，且有相应的拦截器，而此时如果要拦截/**，则把静态资源都给拦住了，所以为了配置拦截器方便，让静态资源访问都带一个前缀，这样拦截器指定放行就很方便了。</p>
<h2 id="欢迎页支持"><a href="#欢迎页支持" class="headerlink" title="欢迎页支持"></a>欢迎页支持</h2><ul>
<li><p>方式一：静态资源路径下  index.html</p>
<ul>
<li><p>可以配置静态资源路径</p>
</li>
<li><p>但是不可以配置静态资源的访问前缀。否则导致 index.html不能被默认访问</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">spring:#</span>  <span class="string">mvc:#</span>    <span class="attr">static-path-pattern:</span> <span class="string">/res/**</span>   <span class="string">这个会导致welcome</span> <span class="string">page功能失效</span>  <span class="attr">resources:    static-locations:</span> <span class="string">[classpath:/haha/]</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>方式二：controller能处理/index</p>
</li>
</ul>
<h3 id="2-3、自定义-Favicon"><a href="#2-3、自定义-Favicon" class="headerlink" title="2.3、自定义 Favicon"></a>2.3、自定义 Favicon</h3><p>favicon.ico 放在静态资源目录下即可。</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">spring:#</span>  <span class="string">mvc:#</span>    <span class="attr">static-path-pattern:</span> <span class="string">/res/**</span>   <span class="string">这个会导致</span> <span class="string">Favicon</span> <span class="string">功能失效</span></span><br></pre></td></tr></table></figure>

<h2 id="普通参数与基本注解"><a href="#普通参数与基本注解" class="headerlink" title="普通参数与基本注解"></a>普通参数与基本注解</h2><h3 id="注解："><a href="#注解：" class="headerlink" title="注解："></a>注解：</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@PathVariable</span> 路径变量<span class="meta">@RequestHeader</span> 获取请求头参数<span class="meta">@ModelAttribute</span><span class="meta">@RequestParam</span> 获取请求参数<span class="meta">@MatrixVariable</span><span class="meta">@CookieValue</span> 获取cookie的值<span class="meta">@RequestBody</span> 获取请求体[只有post才有请求体]，存储表单中的kv值@获取request域属性，一般用于页面转发的时候来取出当前请求中的数据</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestControllerpublic</span> <span class="class"><span class="keyword">class</span> <span class="title">ParameterTestController</span> </span>&#123;    <span class="comment">//rest风格    @GetMapping("/car/&#123;id&#125;/owner/&#123;username&#125;")    public Map&lt;String,Object&gt; getCar(@PathVariable("id") Integer id,                                     @PathVariable("username") String name,                                     @PathVariable Map&lt;String,String&gt; pv,//获取所有路径变量的kv                                     @RequestHeader("User-Agent") String userAgent,                                     @RequestHeader Map&lt;String,String&gt; header,                                     @RequestParam("age") Integer age,                                     @RequestParam("inters") List&lt;String&gt; inters,                                     @RequestParam Map&lt;String,String&gt; params,                                     @CookieValue("_ga") String _ga,                                     @CookieValue("_ga") Cookie cookie)&#123;        Map&lt;String,Object&gt; map = new HashMap&lt;&gt;();        map.put("id",id);        map.put("name",name);        map.put("pv",pv);        map.put("userAgent",userAgent);        map.put("headers",header);        map.put("age",age);        map.put("inters",inters);        map.put("params",params);        map.put("_ga",_ga);        System.out.println(cookie.getName()+"===&gt;"+cookie.getValue());        return map;    &#125;//===========================@RequestBody的使用==========================    @PostMapping("/save")    public Map postMethod(@RequestBody String content)&#123;        Map&lt;String,Object&gt; map = new HashMap&lt;&gt;();        map.put("content",content);        return map;    &#125;//===========================@RequestAttribute的使用==========================    @GetMapping("/goto")    public String goToPage(HttpServletRequest request)&#123;        request.setAttribute("msg","成功了...");        request.setAttribute("code",200);        return "forward:/success"; //转发到 /success请求    &#125;    @ResponseBody    @GetMapping("/success")    public Map success(@RequestAttribute("msg") String msg,                       @RequestAttribute("code") Integer code,                       HttpServletRequest request)&#123;        Object msg1 = request.getAttribute("msg"); //也可以这样来取        Map&lt;String,Object&gt; map = new HashMap&lt;&gt;();        map.put("reqMethod_msg1",msg1);        map.put("reqMethod_msg",msg);        return map;    &#125;    //===========================@MatrixVariable矩阵变量的使用==========================    //1、语法： 请求路径：/cars/sell;low=34;brand=byd,audi,yd    //2、SpringBoot默认是禁用了矩阵变量的功能    //      手动开启：原理。对于路径的处理。UrlPathHelper进行解析。    //              removeSemicolonContent（移除分号内容）支持矩阵变量的    //3、矩阵变量必须有url路径变量才能被解析    @GetMapping("/cars/&#123;path&#125;")    public Map carsSell(@MatrixVariable("low") Integer low,                        @MatrixVariable("brand") List&lt;String&gt; brand,                        @PathVariable("path") String path)&#123;        Map&lt;String,Object&gt; map = new HashMap&lt;&gt;();        map.put("low",low);        map.put("brand",brand);        map.put("path",path);        return map;    &#125;    // /boss/1;age=20/2;age=10    @GetMapping("/boss/&#123;bossId&#125;/&#123;empId&#125;")    public Map boss(@MatrixVariable(value = "age",pathVar = "bossId") Integer bossAge,                    @MatrixVariable(value = "age",pathVar = "empId") Integer empAge)&#123;        Map&lt;String,Object&gt; map = new HashMap&lt;&gt;();        map.put("bossAge",bossAge);        map.put("empAge",empAge);        return map;    &#125;&#125;</span></span><br></pre></td></tr></table></figure>

<h2 id="视图解析与模板引擎"><a href="#视图解析与模板引擎" class="headerlink" title="视图解析与模板引擎"></a>视图解析与模板引擎</h2><p>视图解析：<strong>SpringBoot默认不支持 JSP，因为SpringBoot默认打包方式是一个jar包，jar包相当于压缩包，JSP不支持在压缩包编译的方式，因此想要进行页面的渲染，我们需要引入第三方模板引擎技术实现页面渲染。</strong></p>
<p>模板引擎：templates下所有页面的解析一定是得经过请求处理(即经过controller)，最终由模板引擎进行解析，不能够直接访问html页面的，我们所能直接访问只能是静态文件夹下的(即static)。</p>
<h4 id="模板引擎-Thymeleaf"><a href="#模板引擎-Thymeleaf" class="headerlink" title="模板引擎-Thymeleaf"></a>模板引擎-Thymeleaf</h4><p><strong>现代化、服务端Java模板引擎，很像我们的JSP</strong></p>
<h4 id="2、基本语法"><a href="#2、基本语法" class="headerlink" title="2、基本语法"></a>2、基本语法</h4><h4 id="表达式"><a href="#表达式" class="headerlink" title="表达式"></a>表达式</h4><table>
<thead>
<tr>
<th>表达式名字</th>
<th>语法</th>
<th>用途</th>
</tr>
</thead>
<tbody><tr>
<td>变量取值</td>
<td>${…}</td>
<td>获取请求域、session域、对象等值</td>
</tr>
<tr>
<td>选择变量</td>
<td>*{…}</td>
<td>获取上下文对象值</td>
</tr>
<tr>
<td>消息</td>
<td>#{…}</td>
<td>获取国际化等值</td>
</tr>
<tr>
<td>链接</td>
<td>@{…}</td>
<td>生成链接</td>
</tr>
<tr>
<td>片段表达式</td>
<td>~{…}</td>
<td>jsp:include 作用，引入公共页面片段</td>
</tr>
</tbody></table>
<h4 id="字面量"><a href="#字面量" class="headerlink" title="字面量"></a>字面量</h4><p>文本值: <strong>‘one text’</strong> <strong>,</strong> <strong>‘Another one!’</strong> <strong>,…</strong>数字: <strong>0</strong> <strong>,</strong> <strong>34</strong> <strong>,</strong> <strong>3.0</strong> <strong>,</strong> <strong>12.3</strong> <strong>,…</strong>布尔值: <strong>true</strong> <strong>,</strong> <strong>false</strong></p>
<p>空值: <strong>null</strong></p>
<p>变量： one，two，…. 变量不能有空格</p>
<h4 id="文本操作"><a href="#文本操作" class="headerlink" title="文本操作"></a>文本操作</h4><p>字符串拼接: <strong>+</strong></p>
<p>变量替换: <strong>|The name is ${name}|</strong> </p>
<h4 id="数学运算"><a href="#数学运算" class="headerlink" title="数学运算"></a>数学运算</h4><p>运算符: + , - , * , / , %</p>
<h4 id="布尔运算"><a href="#布尔运算" class="headerlink" title="布尔运算"></a>布尔运算</h4><p>运算符:  <strong>and</strong> <strong>,</strong> <strong>or</strong></p>
<p>一元运算: <strong>!</strong> <strong>,</strong> <strong>not</strong> </p>
<p>**<br>**</p>
<h4 id="比较运算"><a href="#比较运算" class="headerlink" title="比较运算"></a>比较运算</h4><p>比较: <strong>&gt;</strong> <strong>,</strong> <strong>&lt;</strong> <strong>,</strong> <strong>&gt;=</strong> <strong>,</strong> <strong>&lt;=</strong> <strong>(</strong> <strong>gt</strong> <strong>,</strong> <strong>lt</strong> <strong>,</strong> <strong>ge</strong> <strong>,</strong> <strong>le</strong> <strong>)</strong>等式: <strong>==</strong> <strong>,</strong> <strong>!=</strong> <strong>(</strong> <strong>eq</strong> <strong>,</strong> <strong>ne</strong> <strong>)</strong> </p>
<h4 id="条件运算"><a href="#条件运算" class="headerlink" title="条件运算"></a>条件运算</h4><p>If-then: <strong>(if) ? (then)</strong></p>
<p>If-then-else: <strong>(if) ? (then) : (else)</strong></p>
<p>Default: (value) <strong>?: (defaultvalue)</strong> </p>
<h4 id="特殊操作"><a href="#特殊操作" class="headerlink" title="特殊操作"></a>特殊操作</h4><p>无操作： _</p>
<h4 id="设置属性值-th-attr"><a href="#设置属性值-th-attr" class="headerlink" title="设置属性值-th:attr"></a>设置属性值-th:attr</h4><p>设置单个值</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"subscribe.html"</span> <span class="attr">th:attr</span>=<span class="string">"action=@&#123;/subscribe&#125;"</span>&gt;</span>  <span class="tag">&lt;<span class="name">fieldset</span>&gt;</span>    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"email"</span> /&gt;</span>    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"Subscribe!"</span> <span class="attr">th:attr</span>=<span class="string">"value=#&#123;subscribe.submit&#125;"</span>/&gt;</span>  <span class="tag">&lt;/<span class="name">fieldset</span>&gt;</span><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>设置多个值</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"../../images/gtvglogo.png"</span>  <span class="attr">th:attr</span>=<span class="string">"src=@&#123;/images/gtvglogo.png&#125;,title=#&#123;logo&#125;,alt=#&#123;logo&#125;"</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<p>以上两个的代替写法 th:xxxx</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"Subscribe!"</span> <span class="attr">th:value</span>=<span class="string">"#&#123;subscribe.submit&#125;"</span>/&gt;</span><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"subscribe.html"</span> <span class="attr">th:action</span>=<span class="string">"@&#123;/subscribe&#125;"</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>所有h5兼容的标签写法</p>
<p><a href="https://www.thymeleaf.org/doc/tutorials/3.0/usingthymeleaf.html#setting-value-to-specific-attributes" target="_blank" rel="noopener">https://www.thymeleaf.org/doc/tutorials/3.0/usingthymeleaf.html#setting-value-to-specific-attributes</a></p>
<h4 id="迭代"><a href="#迭代" class="headerlink" title="迭代"></a>迭代</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">tr</span> <span class="attr">th:each</span>=<span class="string">"prod : $&#123;prods&#125;"</span>&gt;</span>        <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">"$&#123;prod.name&#125;"</span>&gt;</span>Onions<span class="tag">&lt;/<span class="name">td</span>&gt;</span>        <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">"$&#123;prod.price&#125;"</span>&gt;</span>2.41<span class="tag">&lt;/<span class="name">td</span>&gt;</span>        <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">"$&#123;prod.inStock&#125;? #&#123;true&#125; : #&#123;false&#125;"</span>&gt;</span>yes<span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">tr</span> <span class="attr">th:each</span>=<span class="string">"prod,iterStat : $&#123;prods&#125;"</span> <span class="attr">th:class</span>=<span class="string">"$&#123;iterStat.odd&#125;? 'odd'"</span>&gt;</span>  <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">"$&#123;prod.name&#125;"</span>&gt;</span>Onions<span class="tag">&lt;/<span class="name">td</span>&gt;</span>  <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">"$&#123;prod.price&#125;"</span>&gt;</span>2.41<span class="tag">&lt;/<span class="name">td</span>&gt;</span>  <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">"$&#123;prod.inStock&#125;? #&#123;true&#125; : #&#123;false&#125;"</span>&gt;</span>yes<span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="条件运算-1"><a href="#条件运算-1" class="headerlink" title="条件运算"></a>条件运算</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"comments.html"</span><span class="attr">th:href</span>=<span class="string">"@&#123;/product/comments(prodId=$&#123;prod.id&#125;)&#125;"</span><span class="attr">th:if</span>=<span class="string">"$&#123;not #lists.isEmpty(prod.comments)&#125;"</span>&gt;</span>view<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">th:switch</span>=<span class="string">"$&#123;user.role&#125;"</span>&gt;</span>  <span class="tag">&lt;<span class="name">p</span> <span class="attr">th:case</span>=<span class="string">"'admin'"</span>&gt;</span>User is an administrator<span class="tag">&lt;/<span class="name">p</span>&gt;</span>  <span class="tag">&lt;<span class="name">p</span> <span class="attr">th:case</span>=<span class="string">"#&#123;roles.manager&#125;"</span>&gt;</span>User is a manager<span class="tag">&lt;/<span class="name">p</span>&gt;</span>  <span class="tag">&lt;<span class="name">p</span> <span class="attr">th:case</span>=<span class="string">"*"</span>&gt;</span>User is some other thing<span class="tag">&lt;/<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="thymeleaf使用"><a href="#thymeleaf使用" class="headerlink" title="thymeleaf使用"></a>thymeleaf使用</h3><h4 id="引入starter"><a href="#引入starter" class="headerlink" title="引入starter"></a>引入starter</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span>    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span>    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-thymeleaf<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="引入stater后，SpringBoot自动配置好了thymeleaf"><a href="#引入stater后，SpringBoot自动配置好了thymeleaf" class="headerlink" title="引入stater后，SpringBoot自动配置好了thymeleaf"></a>引入stater后，SpringBoot自动配置好了thymeleaf</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span>(proxyBeanMethods = <span class="keyword">false</span>)<span class="meta">@EnableConfigurationProperties</span>(ThymeleafProperties<span class="class">.<span class="keyword">class</span>)@<span class="title">ConditionalOnClass</span>(</span>&#123; TemplateMode<span class="class">.<span class="keyword">class</span>, <span class="title">SpringTemplateEngine</span>.<span class="title">class</span> &#125;)@<span class="title">AutoConfigureAfter</span>(</span>&#123; WebMvcAutoConfiguration<span class="class">.<span class="keyword">class</span>, <span class="title">WebFluxAutoConfiguration</span>.<span class="title">class</span> &#125;)<span class="title">public</span> <span class="title">class</span> <span class="title">ThymeleafAutoConfiguration</span> </span>&#123;&#125;</span><br></pre></td></tr></table></figure>

<p>自动配好的策略</p>
<ul>
<li><p>1、所有thymeleaf的配置值都在 ThymeleafProperties</p>
</li>
<li><p>2、配置好了 <strong>SpringTemplateEngine</strong> </p>
</li>
<li><p><strong>3、配好了</strong> <strong>ThymeleafViewResolver</strong> </p>
</li>
<li><p>4、我们只需要直接开发页面</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String DEFAULT_PREFIX = <span class="string">"classpath:/templates/"</span>;<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String DEFAULT_SUFFIX = <span class="string">".html"</span>;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="页面开发"><a href="#页面开发" class="headerlink" title="页面开发"></a>页面开发</h3><p>controller层</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controllerpublic</span> <span class="class"><span class="keyword">class</span> <span class="title">ViewTestController</span> </span>&#123;    <span class="meta">@GetMapping</span>(<span class="string">"/atguigu"</span>)    <span class="function"><span class="keyword">public</span> String <span class="title">atguigu</span><span class="params">(Model model)</span></span>&#123;        <span class="comment">//model中的数据会被放在请求与中，相当于request.setAttribute()        model.addAttribute("msg","你好");        model.addAttribute("link","www.baidu.com");        return "success";//自动解析成success.html    &#125;&#125;</span></span><br></pre></td></tr></table></figure>

<p>html</p>
<p>如果使用了thymeleaf模板引擎，则html页面需要引入名称空间<code>xmlns:th=&quot;http://www.thymeleaf.org&quot;</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span> <span class="attr">xmlns:th</span>=<span class="string">"http://www.thymeleaf.org"</span>&gt;</span><span class="tag">&lt;<span class="name">head</span>&gt;</span>    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span>    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">head</span>&gt;</span><span class="tag">&lt;<span class="name">body</span>&gt;</span><span class="tag">&lt;<span class="name">h1</span> <span class="attr">th:text</span>=<span class="string">"$&#123;msg&#125;"</span>&gt;</span>默认值<span class="tag">&lt;/<span class="name">h1</span>&gt;</span><span class="tag">&lt;<span class="name">h2</span>&gt;</span>    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"www.atguigu.com"</span> <span class="attr">th:href</span>=<span class="string">"$&#123;link&#125;"</span>&gt;</span>去百度<span class="tag">&lt;/<span class="name">a</span>&gt;</span> <span class="tag">&lt;<span class="name">br</span>&gt;</span>    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"www.atguigu.com"</span> <span class="attr">th:href</span>=<span class="string">"@&#123;link&#125;"</span>&gt;</span>去百度2<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">h2</span>&gt;</span><span class="tag">&lt;/<span class="name">body</span>&gt;</span><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="构建后台管理系统"><a href="#构建后台管理系统" class="headerlink" title="构建后台管理系统"></a>构建后台管理系统</h2><h3 id="1、项目创建"><a href="#1、项目创建" class="headerlink" title="1、项目创建"></a>1、项目创建</h3><p>thymeleaf、web-starter、devtools、lombok</p>
<h3 id="2、静态资源处理"><a href="#2、静态资源处理" class="headerlink" title="2、静态资源处理"></a>2、静态资源处理</h3><p>自动配置好，我们只需要把所有静态资源放到 static 文件夹下</p>
<h3 id="3、路径构建"><a href="#3、路径构建" class="headerlink" title="3、路径构建"></a>3、路径构建</h3><p>th:action=”@{/login}”</p>
<h3 id="4、模板抽取"><a href="#4、模板抽取" class="headerlink" title="4、模板抽取"></a>4、模板抽取</h3><p>th:insert/replace/include</p>
<h3 id="5、页面跳转"><a href="#5、页面跳转" class="headerlink" title="5、页面跳转"></a>5、页面跳转</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@PostMapping</span>(<span class="string">"/login"</span>)<span class="function"><span class="keyword">public</span> String <span class="title">main</span><span class="params">(User user, HttpSession session, Model model)</span></span>&#123;    <span class="keyword">if</span>(StringUtils.hasLength(user.getUserName()) &amp;&amp; <span class="string">"123456"</span>.equals(user.getPassword()))&#123;        <span class="comment">//把登录成功后的用户保存起来        session.setAttribute("loginUser",user);        //登录成功后重定向到main.html，这样可以避免刷新页面，重复提交表单问题。即重定向可以防止表单重复提交        return "redirect:/main.html";    &#125;else &#123;        model.addAttribute("msg","账号密码错误");        return "login";    &#125;&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="数据渲染"><a href="#数据渲染" class="headerlink" title="数据渲染"></a>数据渲染</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping</span>(<span class="string">"/dynamic_table"</span>)    <span class="function"><span class="keyword">public</span> String <span class="title">dynamic_table</span><span class="params">(Model model)</span></span>&#123;        <span class="comment">//表格内容的遍历        List&lt;User&gt; users = Arrays.asList(new User("zhangsan", "123456"),                new User("lisi", "123444"),                new User("haha", "aaaaa"),                new User("hehe ", "aaddd"));        model.addAttribute("users",users);        return "table/dynamic_table";    &#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="拦截器"><a href="#拦截器" class="headerlink" title="拦截器"></a>拦截器</h3><h4 id="HandlerInterceptor-接口"><a href="#HandlerInterceptor-接口" class="headerlink" title="HandlerInterceptor 接口"></a>HandlerInterceptor 接口</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** * 登录检查 * 1、配置好拦截器要拦截哪些请求 * 2、把这些配置放在容器中 */</span><span class="meta">@Slf</span>4jpublic <span class="class"><span class="keyword">class</span> <span class="title">LoginInterceptor</span> <span class="keyword">implements</span> <span class="title">HandlerInterceptor</span> </span>&#123;    <span class="comment">/**     * 目标方法执行之前     * <span class="doctag">@param</span> request     * <span class="doctag">@param</span> response     * <span class="doctag">@param</span> handler     * <span class="doctag">@return</span>     * <span class="doctag">@throws</span> Exception     */</span>    <span class="meta">@Override</span>    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">preHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler)</span> <span class="keyword">throws</span> Exception </span>&#123;        String requestURI = request.getRequestURI();        log.info(<span class="string">"preHandle拦截的请求路径是&#123;&#125;"</span>,requestURI);        <span class="comment">//登录检查逻辑        HttpSession session = request.getSession();        Object loginUser = session.getAttribute("loginUser");        if(loginUser != null)&#123;            //放行            return true;        &#125;        //拦截住。未登录。跳转到登录页        request.setAttribute("msg","请先登录");//        response.sendRedirect("/");        request.getRequestDispatcher("/").forward(request,response);        return false;    &#125;    /**     * 目标方法执行完成以后     * @param request     * @param response     * @param handler     * @param modelAndView     * @throws Exception     */    @Override    public void postHandle(HttpServletRequest request, HttpServletResponse response, Object handler, ModelAndView modelAndView) throws Exception &#123;        log.info("postHandle执行&#123;&#125;",modelAndView);    &#125;    /**     * 页面渲染以后     * @param request     * @param response     * @param handler     * @param ex     * @throws Exception     */    @Override    public void afterCompletion(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex) throws Exception &#123;        log.info("afterCompletion执行异常&#123;&#125;",ex);    &#125;&#125;</span></span><br></pre></td></tr></table></figure>

<p>配置拦截器</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** * 1、编写一个拦截器实现HandlerInterceptor接口 * 2、拦截器注册到容器中（实现WebMvcConfigurer的addInterceptors） * 3、指定拦截规则【如果是拦截所有，静态资源也会被拦截】 */</span><span class="meta">@Configurationpublic</span> <span class="class"><span class="keyword">class</span> <span class="title">AdminWebConfig</span> <span class="keyword">implements</span> <span class="title">WebMvcConfigurer</span> </span>&#123;    <span class="meta">@Override</span>    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addInterceptors</span><span class="params">(InterceptorRegistry registry)</span> </span>&#123;        registry.addInterceptor(<span class="keyword">new</span> LoginInterceptor())                .addPathPatterns(<span class="string">"/**"</span>)  <span class="comment">//所有请求都被拦截包括静态资源                .excludePathPatterns("/","/login","/css/**","/fonts/**","/images/**","/js/**"); //放行的请求    &#125;&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="文件上传"><a href="#文件上传" class="headerlink" title="文件上传"></a>文件上传</h3><h4 id="页面表单"><a href="#页面表单" class="headerlink" title="页面表单"></a>页面表单</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">method</span>=<span class="string">"post"</span> <span class="attr">action</span>=<span class="string">"/upload"</span> <span class="attr">enctype</span>=<span class="string">"multipart/form-data"</span>&gt;</span>    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"file"</span> <span class="attr">name</span>=<span class="string">"file"</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span>    <span class="comment">&lt;!--多文件上传--&gt;</span>    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"file"</span> <span class="attr">name</span>=<span class="string">"files"</span> <span class="attr">multiple</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span>    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"提交"</span>&gt;</span><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="文件上传代码"><a href="#文件上传代码" class="headerlink" title="文件上传代码"></a>文件上传代码</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**     * MultipartFile 自动封装上传过来的文件     * <span class="doctag">@param</span> email     * <span class="doctag">@param</span> username     * <span class="doctag">@param</span> headerImg     * <span class="doctag">@param</span> photos     * <span class="doctag">@return</span>     */</span>    <span class="meta">@PostMapping</span>(<span class="string">"/upload"</span>)    <span class="function"><span class="keyword">public</span> String <span class="title">upload</span><span class="params">(@RequestParam(<span class="string">"email"</span>)</span> String email,                         @<span class="title">RequestParam</span><span class="params">(<span class="string">"username"</span>)</span> String username,                         @<span class="title">RequestPart</span><span class="params">(<span class="string">"headerImg"</span>)</span> MultipartFile headerImg,                         @<span class="title">RequestPart</span><span class="params">(<span class="string">"photos"</span>)</span> MultipartFile[] photos) <span class="keyword">throws</span> IOException </span>&#123;        log.info(<span class="string">"上传的信息：email=&#123;&#125;，username=&#123;&#125;，headerImg=&#123;&#125;，photos=&#123;&#125;"</span>,                email,username,headerImg.getSize(),photos.length);        <span class="keyword">if</span>(!headerImg.isEmpty())&#123;            <span class="comment">//一般是保存到文件服务器，OSS服务器，这里保存在本地电脑的磁盘上            String originalFilename = headerImg.getOriginalFilename();            headerImg.transferTo(new File("H:\\cache\\"+originalFilename));        &#125;        if(photos.length &gt; 0)&#123;            for (MultipartFile photo : photos) &#123;                if(!photo.isEmpty())&#123;                    String originalFilename = photo.getOriginalFilename();                    photo.transferTo(new File("H:\\cache\\"+originalFilename));                &#125;            &#125;        &#125;        return "main";    &#125;</span></span><br></pre></td></tr></table></figure>

<p>默认上传大小</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//每张图片最大为1MBprivate DataSize maxFileSize = DataSize.ofMegabytes(1);//总大小为10MBprivate DataSize maxRequestSize = DataSize.ofMegabytes(10);</span></span><br></pre></td></tr></table></figure>

<p>修改默认上传大小</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:  servlet:    multipart:      max-file-size: 10MB      max-request-size:</span> <span class="string">100MB</span></span><br></pre></td></tr></table></figure>

<h3 id="异常处理"><a href="#异常处理" class="headerlink" title="异常处理"></a>异常处理</h3><h4 id="1、错误处理"><a href="#1、错误处理" class="headerlink" title="1、错误处理"></a>1、错误处理</h4><h5 id="1、默认规则"><a href="#1、默认规则" class="headerlink" title="1、默认规则"></a>1、默认规则</h5><ul>
<li>默认情况下，Spring Boot提供<code>/error</code>处理所有错误的映射</li>
<li>对于机器客户端，它将生成JSON响应，其中包含错误，HTTP状态和异常消息的详细信息。对于浏览器客户端，响应一个“ whitelabel”错误视图，以HTML格式呈现相同的数据</li>
<li>自定义：error/下的4xx，5xx页面会被自动解析；</li>
</ul>
<h3 id="11、定制化原理"><a href="#11、定制化原理" class="headerlink" title="11、定制化原理"></a>11、定制化原理</h3><h4 id="1、定制化的常见方式"><a href="#1、定制化的常见方式" class="headerlink" title="1、定制化的常见方式"></a>1、定制化的常见方式</h4><ul>
<li>修改配置文件；</li>
<li><strong>xxxxxCustomizer；</strong></li>
<li><strong>编写自定义的配置类  xxxConfiguration；+</strong> <strong>@Bean替换、增加容器中默认组件；视图解析器</strong> </li>
<li><strong>Web应用 编写一个配置类实现 WebMvcConfigurer 即可定制化web功能；+ @Bean给容器中再扩展一些组件</strong></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configurationpublic</span> <span class="class"><span class="keyword">class</span> <span class="title">AdminWebConfig</span> <span class="keyword">implements</span> <span class="title">WebMvcConfigurer</span></span></span><br></pre></td></tr></table></figure>

<h3 id="2、原理分析套路"><a href="#2、原理分析套路" class="headerlink" title="2、原理分析套路"></a>2、原理分析套路</h3><p>加粗的是我们需要操作的</p>
<p><strong>场景starter</strong> - xxxxAutoConfiguration - 导入xxx组件 - 绑定xxxProperties - <strong>绑定配置文件项</strong> </p>
<h2 id="数据访问"><a href="#数据访问" class="headerlink" title="数据访问"></a>数据访问</h2><h3 id="SQL"><a href="#SQL" class="headerlink" title="SQL"></a>SQL</h3><h3 id="1、数据源的自动配置-HikariDataSource"><a href="#1、数据源的自动配置-HikariDataSource" class="headerlink" title="1、数据源的自动配置-HikariDataSource"></a>1、数据源的自动配置-<strong>HikariDataSource</strong></h3><h3 id="1、导入JDBC场景"><a href="#1、导入JDBC场景" class="headerlink" title="1、导入JDBC场景"></a>1、导入JDBC场景</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span>    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span>    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-data-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>数据库驱动？</p>
<p>为什么导入JDBC场景，官方不导入驱动？官方不知道我们接下要操作什么数据库。</p>
<p>数据库版本和驱动版本对应</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">默认版本：<span class="tag">&lt;<span class="name">mysql.version</span>&gt;</span>8.0.22<span class="tag">&lt;/<span class="name">mysql.version</span>&gt;</span>        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span>            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span>            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span><span class="comment">&lt;!--            &lt;version&gt;5.1.49&lt;/version&gt;--&gt;</span>        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span>想要修改版本1、直接依赖引入具体版本（maven的就近依赖原则）2、重新声明版本（maven的属性的就近优先原则）<span class="tag">&lt;<span class="name">properties</span>&gt;</span>    <span class="tag">&lt;<span class="name">java.version</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">java.version</span>&gt;</span>    <span class="tag">&lt;<span class="name">mysql.version</span>&gt;</span>5.1.49<span class="tag">&lt;/<span class="name">mysql.version</span>&gt;</span><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="修改配置项"><a href="#修改配置项" class="headerlink" title="修改配置项"></a>修改配置项</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:  datasource:    url: jdbc:mysql://localhost:3306/db_account    username: root    password: 6666    driver-class-name:</span> <span class="string">com.mysql.jdbc.Driver</span></span><br></pre></td></tr></table></figure>

<h3 id="测试-1"><a href="#测试-1" class="headerlink" title="测试"></a>测试</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@AutowiredJdbcTemplate</span> jdbcTemplate;<span class="meta">@Testvoid</span> contextLoads() &#123;    Long aLong = jdbcTemplate.queryForObject(<span class="string">"select count(*) from user"</span>, Long<span class="class">.<span class="keyword">class</span>)</span>;    log.info(<span class="string">"记录总数：&#123;&#125;"</span>,aLong);&#125;</span><br></pre></td></tr></table></figure>

<h3 id="使用Druid数据源"><a href="#使用Druid数据源" class="headerlink" title="使用Druid数据源"></a>使用Druid数据源</h3><h4 id="1、druid官方github地址"><a href="#1、druid官方github地址" class="headerlink" title="1、druid官方github地址"></a>1、druid官方github地址</h4><p><a href="https://github.com/alibaba/druid" target="_blank" rel="noopener">https://github.com/alibaba/druid</a></p>
<p>整合第三方技术的两种方式</p>
<ul>
<li>自定义</li>
<li>找starter</li>
</ul>
<h3 id="2、自定义方式"><a href="#2、自定义方式" class="headerlink" title="2、自定义方式"></a>2、自定义方式</h3><h4 id="1、创建数据源"><a href="#1、创建数据源" class="headerlink" title="1、创建数据源"></a>1、创建数据源</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--引入数据源--&gt;</span><span class="tag">&lt;<span class="name">dependency</span>&gt;</span>    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span>    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>druid<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span>    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.17<span class="tag">&lt;/<span class="name">version</span>&gt;</span><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span><span class="comment">&lt;!--以前写法--&gt;</span><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"dataSource"</span> <span class="attr">class</span>=<span class="string">"com.alibaba.druid.pool.DruidDataSource"</span>    <span class="attr">destroy-method</span>=<span class="string">"close"</span>&gt;</span>    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"url"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.url&#125;"</span> /&gt;</span>    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"username"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.username&#125;"</span> /&gt;</span>    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.password&#125;"</span> /&gt;</span>    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"maxActive"</span> <span class="attr">value</span>=<span class="string">"20"</span> /&gt;</span>    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"initialSize"</span> <span class="attr">value</span>=<span class="string">"1"</span> /&gt;</span>    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"maxWait"</span> <span class="attr">value</span>=<span class="string">"60000"</span> /&gt;</span>    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"minIdle"</span> <span class="attr">value</span>=<span class="string">"1"</span> /&gt;</span>    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"timeBetweenEvictionRunsMillis"</span> <span class="attr">value</span>=<span class="string">"60000"</span> /&gt;</span>    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"minEvictableIdleTimeMillis"</span> <span class="attr">value</span>=<span class="string">"300000"</span> /&gt;</span>    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"testWhileIdle"</span> <span class="attr">value</span>=<span class="string">"true"</span> /&gt;</span>    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"testOnBorrow"</span> <span class="attr">value</span>=<span class="string">"false"</span> /&gt;</span>    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"testOnReturn"</span> <span class="attr">value</span>=<span class="string">"false"</span> /&gt;</span>    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"poolPreparedStatements"</span> <span class="attr">value</span>=<span class="string">"true"</span> /&gt;</span>    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"maxOpenPreparedStatements"</span> <span class="attr">value</span>=<span class="string">"20"</span> /&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="自定义配置类"><a href="#自定义配置类" class="headerlink" title="自定义配置类"></a>自定义配置类</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configurationpublic</span> <span class="class"><span class="keyword">class</span> <span class="title">MyDataSourceConfig</span> </span>&#123;    <span class="comment">// 默认的自动配置是判断容器中没有才会配@ConditionalOnMissingBean(DataSource.class)    @ConfigurationProperties("spring.datasource")    @Bean    public DataSource dataSource()&#123;        DruidDataSource druidDataSource = new DruidDataSource();//        以下配置信息可以在yaml配置文件做//        druidDataSource.setUrl();//        druidDataSource.setUsername();        return druidDataSource;    &#125;&#125;</span></span><br></pre></td></tr></table></figure>

<h4 id="2、StatViewServlet"><a href="#2、StatViewServlet" class="headerlink" title="2、StatViewServlet"></a>2、StatViewServlet</h4><p>StatViewServlet的用途包括：</p>
<ul>
<li>提供监控信息展示的html页面</li>
<li>提供监控信息的JSON API</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span>    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>DruidStatView<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span>    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.alibaba.druid.support.http.StatViewServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span>    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>DruidStatView<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span>    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/druid/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 默认的自动配置是判断容器中没有才会配@ConditionalOnMissingBean(DataSource.class)    @ConfigurationProperties("spring.datasource")    @Bean    public DataSource dataSource() throws SQLException &#123;        DruidDataSource druidDataSource = new DruidDataSource();//        以下配置信息可以在yaml配置文件做//        druidDataSource.setUrl();//        druidDataSource.setUsername();        //添加Druid的监控统计功能、防火墙        druidDataSource.setFilters("stat,wall");        return druidDataSource;    &#125;    @Bean    public ServletRegistrationBean statViewServlet()&#123;        StatViewServlet statViewServlet = new StatViewServlet();        ServletRegistrationBean&lt;Servlet&gt; registrationBean = new ServletRegistrationBean&lt;&gt;(statViewServlet,"/druid/*");        return registrationBean;    &#125;    /**     * WebStatFilter 用于采集web-jdbc关联监控的数据。     */    @Bean    public FilterRegistrationBean webStatFilter()&#123;        WebStatFilter webStatFilter = new WebStatFilter();        FilterRegistrationBean&lt;WebStatFilter&gt; filterFilterRegistrationBean = new FilterRegistrationBean&lt;&gt;(webStatFilter);        filterFilterRegistrationBean.setUrlPatterns(Arrays.asList("/*"));        filterFilterRegistrationBean.addInitParameter("exclusions","*.js,*.gif,*.jpg,*.png,*.css,*.ico,/druid/*");        return filterFilterRegistrationBean;    &#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="使用官方starter方式"><a href="#使用官方starter方式" class="headerlink" title="使用官方starter方式"></a>使用官方starter方式</h3><h4 id="引入druid-starter"><a href="#引入druid-starter" class="headerlink" title="引入druid-starter"></a>引入druid-starter</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span>    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span>    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>druid-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span>    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.17<span class="tag">&lt;/<span class="name">version</span>&gt;</span><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="2、分析自动配置"><a href="#2、分析自动配置" class="headerlink" title="2、分析自动配置"></a>2、分析自动配置</h4><ul>
<li>扩展配置项 <strong>spring.datasource.druid</strong></li>
<li>DruidSpringAopConfiguration.<strong>class</strong>,  监控SpringBean的；配置项：<strong>spring.datasource.druid.aop-patterns</strong></li>
<li>DruidStatViewServletConfiguration.<strong>class</strong>, 监控页的配置：<strong>spring.datasource.druid.stat-view-servlet；默认开启</strong></li>
<li>DruidWebStatFilterConfiguration.<strong>class</strong>, web监控配置；<strong>spring.datasource.druid.web-stat-filter；默认开启</strong></li>
<li>DruidFilterConfiguration.<strong>class</strong>}) 所有Druid自己filter的配置</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String FILTER_STAT_PREFIX = <span class="string">"spring.datasource.druid.filter.stat"</span>;    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String FILTER_CONFIG_PREFIX = <span class="string">"spring.datasource.druid.filter.config"</span>;    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String FILTER_ENCODING_PREFIX = <span class="string">"spring.datasource.druid.filter.encoding"</span>;    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String FILTER_SLF4J_PREFIX = <span class="string">"spring.datasource.druid.filter.slf4j"</span>;    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String FILTER_LOG4J_PREFIX = <span class="string">"spring.datasource.druid.filter.log4j"</span>;    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String FILTER_LOG4J2_PREFIX = <span class="string">"spring.datasource.druid.filter.log4j2"</span>;    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String FILTER_COMMONS_LOG_PREFIX = <span class="string">"spring.datasource.druid.filter.commons-log"</span>;    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String FILTER_WALL_PREFIX = <span class="string">"spring.datasource.druid.filter.wall"</span>;</span><br></pre></td></tr></table></figure>

<h4 id="3、配置示例"><a href="#3、配置示例" class="headerlink" title="3、配置示例"></a>3、配置示例</h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:  datasource:    url: jdbc:mysql://localhost:3306/db_account    username: root    password: 123456    driver-class-name: com.mysql.jdbc.Driver    druid:      aop-patterns:</span> <span class="string">com.atguigu.admin.*</span>  <span class="comment">#监控SpringBean      filters: stat,wall     # 底层开启功能，stat（sql监控），wall（防火墙）      stat-view-servlet:   # 配置监控页功能        enabled: true        login-username: admin        login-password: admin        resetEnable: false      web-stat-filter:  # 监控web        enabled: true        urlPattern: /*        exclusions: '*.js,*.gif,*.jpg,*.png,*.css,*.ico,/druid/*'      filter:        stat:    # 对上面filters里面的stat的详细配置          slow-sql-millis: 1000          logSlowSql: true # 打开慢sql          enabled: true        wall:          enabled: true          config:            drop-table-allow: false</span></span><br></pre></td></tr></table></figure>

<h2 id="3、整合MyBatis操作"><a href="#3、整合MyBatis操作" class="headerlink" title="3、整合MyBatis操作"></a>3、整合MyBatis操作</h2><p><a href="https://github.com/mybatis" target="_blank" rel="noopener">https://github.com/mybatis</a></p>
<p>starter</p>
<p>SpringBoot官方的Starter：spring-boot-starter-*</p>
<p>第三方的： *-spring-boot-starter</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span>    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.spring.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span>    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span>    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="1、配置模式"><a href="#1、配置模式" class="headerlink" title="1、配置模式"></a>1、配置模式</h3><ul>
<li>全局配置文件</li>
<li>SqlSessionFactory: 自动配置好了</li>
<li>SqlSession：自动配置了 <strong>SqlSessionTemplate 组合了SqlSession</strong></li>
<li>@Import(<strong>AutoConfiguredMapperScannerRegistrar</strong>.<strong>class</strong>）；</li>
<li>Mapper： 只要我们写的操作MyBatis的接口标准了 <strong>@Mapper 就会被自动扫描进来</strong></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@EnableConfigurationProperties</span>(MybatisProperties<span class="class">.<span class="keyword">class</span>) ： <span class="title">MyBatis</span>配置项绑定类。@<span class="title">AutoConfigureAfter</span>(</span>&#123; DataSourceAutoConfiguration<span class="class">.<span class="keyword">class</span>, <span class="title">MybatisLanguageDriverAutoConfiguration</span>.<span class="title">class</span> &#125;)<span class="title">public</span> <span class="title">class</span> <span class="title">MybatisAutoConfiguration</span></span>&#123;&#125;<span class="meta">@ConfigurationProperties</span>(prefix = <span class="string">"mybatis"</span>)<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MybatisProperties</span></span></span><br></pre></td></tr></table></figure>

<p>可以修改配置文件中 mybatis 开始的所有；</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># 配置mybatis规则mybatis:  config-location: classpath:mybatis/mybatis-config.xml  #全局配置文件位置  mapper-locations: classpath:mybatis/mapper/*.xml  #sql映射文件位置  Mapper接口---&gt;绑定Xml<span class="meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">mapper</span>        <span class="meta-keyword">PUBLIC</span> <span class="meta-string">"-//mybatis.org//DTD Mapper 3.0//EN"</span>        <span class="meta-string">"http://mybatis.org/dtd/mybatis-3-mapper.dtd"</span>&gt;</span><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">"com.atguigu.admin.mapper.AccountMapper"</span>&gt;</span><span class="comment">&lt;!--    public Account getAcct(Long id); --&gt;</span>    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"getAcct"</span> <span class="attr">resultType</span>=<span class="string">"com.atguigu.admin.bean.Account"</span>&gt;</span>        select * from  account_tbl where  id=#&#123;id&#125;    <span class="tag">&lt;/<span class="name">select</span>&gt;</span><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>配置 <strong>private</strong> Configuration <strong>configuration</strong>; mybatis.<strong>configuration下面的所有，就是相当于改mybatis全局配置文件中的值</strong></p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 配置mybatis规则mybatis:#  config-location: classpath:mybatis/mybatis-config.xml  mapper-locations: classpath:mybatis/mapper/*.xml  configuration:    map-underscore-to-camel-case: true     可以不写全局；配置文件，所有全局配置文件的配置都放在configuration配置项中即可</span></span><br></pre></td></tr></table></figure>

<p>步骤：</p>
<ul>
<li>导入mybatis官方starter</li>
<li>编写mapper接口。标准@Mapper注解</li>
<li>编写sql映射文件并绑定mapper接口</li>
<li>在application.yaml中指定Mapper配置文件的位置，以及指定全局配置文件的信息 （建议；<strong>配置在mybatis.configuration</strong>）</li>
<li>其他开发则跟以前一样</li>
</ul>
<h3 id="混合模式-注解-配置模式"><a href="#混合模式-注解-配置模式" class="headerlink" title="混合模式(注解+配置模式)"></a>混合模式(注解+配置模式)</h3><p><strong>最佳实战：</strong></p>
<ul>
<li>引入mybatis-starter</li>
<li><strong>配置application.yaml中，指定mapper-location位置即可</strong></li>
<li>编写Mapper接口并标注@Mapper注解</li>
<li>简单方法直接注解方式</li>
<li>复杂方法编写mapper.xml进行绑定映射</li>
<li><em>@MapperScan(“com.atguigu.admin.mapper”) 简化，其他的接口就可以不用标注@Mapper注解</em></li>
</ul>
<h2 id="4、整合-MyBatis-Plus-完成CRUD"><a href="#4、整合-MyBatis-Plus-完成CRUD" class="headerlink" title="4、整合 MyBatis-Plus 完成CRUD"></a>4、整合 MyBatis-Plus 完成CRUD</h2><h3 id="1、什么是MyBatis-Plus"><a href="#1、什么是MyBatis-Plus" class="headerlink" title="1、什么是MyBatis-Plus"></a>1、什么是MyBatis-Plus</h3><p><a href="https://github.com/baomidou/mybatis-plus" target="_blank" rel="noopener">MyBatis-Plus</a>（简称 MP）是一个 <a href="http://www.mybatis.org/mybatis-3/" target="_blank" rel="noopener">MyBatis</a> 的增强工具，在 MyBatis 的基础上只做增强不做改变，为简化开发、提高效率而生。</p>
<p><a href="https://baomidou.com/" target="_blank" rel="noopener">mybatis plus 官网</a></p>
<p>建议安装 <strong>MybatisX</strong> 插件 </p>
<h3 id="2、整合MyBatis-Plus"><a href="#2、整合MyBatis-Plus" class="headerlink" title="2、整合MyBatis-Plus"></a>2、整合MyBatis-Plus</h3><p>有了下面这个starter，就不用jdbc和mybatis的starter了</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span>            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span>            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span>            <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.4.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span>        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>自动配置</p>
<ul>
<li>MybatisPlusAutoConfiguration 配置类，MybatisPlusProperties 配置项绑定。<strong>mybatis-plus：xxx 就是对**</strong>mybatis-plus的定制**</li>
<li><strong>SqlSessionFactory 自动配置好。底层是容器中默认的数据源</strong></li>
<li><strong>mapperLocations 自动配置好的。有默认值。**</strong>classpath*:/mapper/*<em>/\</em>.xml；任意包的类路径下的所有mapper文件夹下任意路径下的所有xml都是sql映射文件。  建议以后sql映射文件，放在 mapper下**</li>
<li><strong>容器中也自动配置好了</strong> <strong>SqlSessionTemplate</strong></li>
<li><strong>@Mapper 标注的接口也会被自动扫描；建议直接</strong> @MapperScan(<strong>“com.atguigu.admin.mapper”</strong>) 批量扫描就行</li>
</ul>
<p><strong>优点：</strong></p>
<ul>
<li>只需要我们的Mapper继承 <strong>BaseMapper</strong> 就可以拥有crud能力</li>
</ul>
<h3 id="CRUD功能"><a href="#CRUD功能" class="headerlink" title="CRUD功能"></a>CRUD功能</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping</span>(<span class="string">"/user/delete/&#123;id&#125;"</span>)    <span class="function"><span class="keyword">public</span> String <span class="title">deleteUser</span><span class="params">(@PathVariable(<span class="string">"id"</span>)</span> Long id,                             @<span class="title">RequestParam</span><span class="params">(value = <span class="string">"pn"</span>,defaultValue = <span class="string">"1"</span>)</span>Integer pn,                             RedirectAttributes ra)</span>&#123;        userService.removeById(id);        ra.addAttribute(<span class="string">"pn"</span>,pn);        <span class="keyword">return</span> <span class="string">"redirect:/dynamic_table"</span>;    &#125;    <span class="meta">@GetMapping</span>(<span class="string">"/dynamic_table"</span>)    <span class="function"><span class="keyword">public</span> String <span class="title">dynamic_table</span><span class="params">(@RequestParam(value=<span class="string">"pn"</span>,defaultValue = <span class="string">"1"</span>)</span> Integer pn,Model model)</span>&#123;        <span class="comment">//表格内容的遍历//        response.sendError//     List&lt;User&gt; users = Arrays.asList(new User("zhangsan", "123456"),//                new User("lisi", "123444"),//                new User("haha", "aaaaa"),//                new User("hehe ", "aaddd"));//        model.addAttribute("users",users);////        if(users.size()&gt;3)&#123;//            throw new UserTooManyException();//        &#125;        //从数据库中查出user表中的用户进行展示        //构造分页参数        Page&lt;User&gt; page = new Page&lt;&gt;(pn, 2);        //调用page进行分页        Page&lt;User&gt; userPage = userService.page(page, null);//        userPage.getRecords()//        userPage.getCurrent()//        userPage.getPages()        model.addAttribute("users",userPage);        return "table/dynamic_table";    &#125;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Servicepublic</span> <span class="class"><span class="keyword">class</span> <span class="title">UserServiceImpl</span> <span class="keyword">extends</span> <span class="title">ServiceImpl</span>&lt;<span class="title">UserMapper</span>,<span class="title">User</span>&gt; <span class="keyword">implements</span> <span class="title">UserService</span> </span>&#123;&#125;<span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserService</span> <span class="keyword">extends</span> <span class="title">IService</span>&lt;<span class="title">User</span>&gt; </span>&#123;&#125;</span><br></pre></td></tr></table></figure>

<h1 id="2、NoSQL"><a href="#2、NoSQL" class="headerlink" title="2、NoSQL"></a>2、NoSQL</h1><p>Redis 是一个开源（BSD许可）的，内存中的数据结构存储系统，它可以用作数据库、<strong>缓存</strong>和消息中间件。 它支持多种类型的数据结构，如 <a href="http://www.redis.cn/topics/data-types-intro.html#strings" target="_blank" rel="noopener">字符串（strings）</a>， <a href="http://www.redis.cn/topics/data-types-intro.html#hashes" target="_blank" rel="noopener">散列（hashes）</a>， <a href="http://www.redis.cn/topics/data-types-intro.html#lists" target="_blank" rel="noopener">列表（lists）</a>， <a href="http://www.redis.cn/topics/data-types-intro.html#sets" target="_blank" rel="noopener">集合（sets）</a>， <a href="http://www.redis.cn/topics/data-types-intro.html#sorted-sets" target="_blank" rel="noopener">有序集合（sorted sets）</a> 与范围查询， <a href="http://www.redis.cn/topics/data-types-intro.html#bitmaps" target="_blank" rel="noopener">bitmaps</a>， <a href="http://www.redis.cn/topics/data-types-intro.html#hyperloglogs" target="_blank" rel="noopener">hyperloglogs</a> 和 <a href="http://www.redis.cn/commands/geoadd.html" target="_blank" rel="noopener">地理空间（geospatial）</a> 索引半径查询。 Redis 内置了 <a href="http://www.redis.cn/topics/replication.html" target="_blank" rel="noopener">复制（replication）</a>，<a href="http://www.redis.cn/commands/eval.html" target="_blank" rel="noopener">LUA脚本（Lua scripting）</a>， <a href="http://www.redis.cn/topics/lru-cache.html" target="_blank" rel="noopener">LRU驱动事件（LRU eviction）</a>，<a href="http://www.redis.cn/topics/transactions.html" target="_blank" rel="noopener">事务（transactions）</a> 和不同级别的 <a href="http://www.redis.cn/topics/persistence.html" target="_blank" rel="noopener">磁盘持久化（persistence）</a>， 并通过 <a href="http://www.redis.cn/topics/sentinel.html" target="_blank" rel="noopener">Redis哨兵（Sentinel）</a>和自动 <a href="http://www.redis.cn/topics/cluster-tutorial.html" target="_blank" rel="noopener">分区（Cluster）</a>提供高可用性（high availability）。</p>
<h2 id="1、Redis自动配置"><a href="#1、Redis自动配置" class="headerlink" title="1、Redis自动配置"></a>1、Redis自动配置</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;            &lt;artifactId&gt;spring-boot-starter-data-redis&lt;/artifactId&gt;        &lt;/dependency&gt;</span><br></pre></td></tr></table></figure>

<p>自动配置：</p>
<ul>
<li>RedisAutoConfiguration 自动配置类。RedisProperties 属性类 –&gt; <strong>spring.redis.xxx是对redis的配置</strong></li>
<li>连接工厂是准备好的。<strong>Lettuce</strong>ConnectionConfiguration、<strong>Jedis</strong>ConnectionConfiguration</li>
<li><strong>自动注入了RedisTemplate</strong>&lt;<strong>Object</strong>, <strong>Object</strong>&gt; ： xxxTemplate；</li>
<li><strong>自动注入了StringRedisTemplate；k：v都是String</strong></li>
<li><strong>key：value</strong></li>
<li><strong>底层只要我们使用</strong> <strong>StringRedisTemplate、**</strong>RedisTemplate就可以操作redis**</li>
<li></li>
</ul>
<p><strong>redis环境搭建</strong></p>
<p><strong>1、阿里云按量付费redis。经典网络</strong></p>
<p><strong>2、申请redis的公网连接地址</strong></p>
<p><strong>3、修改白名单  允许0.0.0.0/0 访问</strong></p>
<h2 id="2、RedisTemplate与Lettuce"><a href="#2、RedisTemplate与Lettuce" class="headerlink" title="2、RedisTemplate与Lettuce"></a>2、RedisTemplate与Lettuce</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span>    <span class="function"><span class="keyword">void</span> <span class="title">testRedis</span><span class="params">()</span></span>&#123;        ValueOperations&lt;String, String&gt; operations = redisTemplate.opsForValue();        operations.set(<span class="string">"hello"</span>,<span class="string">"world"</span>);        String hello = operations.get(<span class="string">"hello"</span>);        System.out.println(hello);    &#125;</span><br></pre></td></tr></table></figure>

<h2 id="3、切换至jedis"><a href="#3、切换至jedis" class="headerlink" title="3、切换至jedis"></a>3、切换至jedis</h2><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&lt;dependency&gt;</span>            <span class="string">&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span>            <span class="string">&lt;artifactId&gt;spring-boot-starter-data-redis&lt;/artifactId&gt;</span>        <span class="string">&lt;/dependency&gt;&lt;!--</span>        <span class="string">导入jedis--&gt;</span>        <span class="string">&lt;dependency&gt;</span>            <span class="string">&lt;groupId&gt;redis.clients&lt;/groupId&gt;</span>            <span class="string">&lt;artifactId&gt;jedis&lt;/artifactId&gt;</span>        <span class="string">&lt;/dependency&gt;spring:</span>  <span class="attr">redis:      host: r-bp1nc7reqesxisgxpipd.redis.rds.aliyuncs.com      port: 6379      password: lfy:Lfy123456      client-type: jedis      jedis:        pool:          max-active:</span> <span class="number">10</span></span><br></pre></td></tr></table></figure>

<h2 id="单元测试"><a href="#单元测试" class="headerlink" title="单元测试"></a>单元测试</h2><h3 id="1、JUnit5-的变化"><a href="#1、JUnit5-的变化" class="headerlink" title="1、JUnit5 的变化"></a>1、JUnit5 的变化</h3><p><strong>Spring Boot 2.2.0 版本开始引入 JUnit 5 作为单元测试默认库</strong></p>
<p>作为最新版本的JUnit框架，JUnit5与之前版本的Junit框架有很大的不同。由三个不同子项目的几个不同模块组成。</p>
<blockquote>
<p><strong>JUnit 5 = JUnit Platform + JUnit Jupiter + JUnit Vintage</strong></p>
</blockquote>
<p><strong>JUnit Platform</strong>: Junit Platform是在JVM上启动测试框架的基础，不仅支持Junit自制的测试引擎，其他测试引擎也都可以接入。</p>
<p><strong>JUnit Jupiter</strong>: JUnit Jupiter提供了JUnit5的新的编程模型，是JUnit5新特性的核心。内部 包含了一个<strong>测试引擎</strong>，用于在Junit Platform上运行。</p>
<p><strong>JUnit Vintage</strong>: 由于JUint已经发展多年，为了照顾老的项目，JUnit Vintage提供了兼容JUnit4.x,Junit3.x的测试引擎。</p>
<p>注意：</p>
<p><strong>SpringBoot 2.4 以上版本移除了默认对 Vintage 的依赖。如果需要兼容junit4需要自行引入（不能使用junit4的功能 @Test）</strong></p>
<p><strong>JUnit 5’s Vintage Engine Removed from</strong> <strong><code>spring-boot-starter-test,如果需要继续兼容junit4需要自行引入vintage</code></strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span>    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.junit.vintage<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span>    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit-vintage-engine<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span>    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span>    <span class="tag">&lt;<span class="name">exclusions</span>&gt;</span>        <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span>            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.hamcrest<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span>            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hamcrest-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span>        <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span>    <span class="tag">&lt;/<span class="name">exclusions</span>&gt;</span><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span>  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span>  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span>  <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>现在版本：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//如果不加@SpringBootTest注解，则该测试类不能使用springboot容器功能，也就是说不具有spring中的自动注入等功能，即该类没有使用springboot的驱动进行测试@SpringBootTestclass Boot05WebAdminApplicationTests &#123;    @Test    void contextLoads() &#123;    &#125;&#125;</span></span><br></pre></td></tr></table></figure>

<p>以前：</p>
<p>@SpringBootTest + @RunWith(SpringTest.class)</p>
<p>SpringBoot整合Junit以后。</p>
<ul>
<li>编写测试方法：@Test标注（注意需要使用junit5版本的注解）</li>
<li>Junit类具有Spring的功能，@Autowired、比如 @Transactional 标注测试方法，测试完成后自动回滚</li>
</ul>
<h2 id="JUnit5常用注解"><a href="#JUnit5常用注解" class="headerlink" title="JUnit5常用注解"></a>JUnit5常用注解</h2><p>JUnit5的注解与JUnit4的注解有所变化</p>
<p><a href="https://junit.org/junit5/docs/current/user-guide/#writing-tests-annotations" target="_blank" rel="noopener">https://junit.org/junit5/docs/current/user-guide/#writing-tests-annotations</a></p>
<ul>
<li><strong>@Test :</strong>表示方法是单元测试方法。但是与JUnit4的@Test不同，他的职责非常单一不能声明任何属性，拓展的测试将会由Jupiter提供额外测试</li>
<li><strong>@ParameterizedTest :</strong>表示方法是参数化测试，下方会有详细介绍</li>
<li><strong>@RepeatedTest :</strong>表示方法可重复执行，即自动重复运行多少次</li>
<li><strong>@DisplayName :</strong>为测试类或者测试方法设置展示名称</li>
<li><strong>@BeforeEach :</strong>表示在每个单元测试之前执行</li>
<li><strong>@AfterEach :</strong>表示在每个单元测试之后执行</li>
<li><strong>@BeforeAll :</strong>表示在所有单元测试之前执行，方法要用static修饰</li>
<li><strong>@AfterAll :</strong>表示在所有单元测试之后执行，方法要用static修饰</li>
<li><strong>@Tag :</strong>表示单元测试类别，类似于JUnit4中的@Categories</li>
<li><strong>@Disabled :</strong>表示测试类或测试方法不执行，类似于JUnit4中的@Ignore</li>
<li><strong>@Timeout :</strong>表示测试方法运行如果超过了指定时间将会返回错误</li>
<li><strong>@ExtendWith :</strong>为测试类或测试方法提供扩展类引用</li>
</ul>
<p>示例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@DisplayName</span>(<span class="string">"junit5功能测试类"</span>)<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Junit5Test</span> </span>&#123;    <span class="meta">@Test</span>    <span class="meta">@DisplayName</span>(<span class="string">"测试displayname注解"</span>)    <span class="function"><span class="keyword">void</span> <span class="title">testDisplayName</span><span class="params">()</span></span>&#123;        System.out.println(<span class="number">1</span>);    &#125;&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://springboot2images.oss-cn-guangzhou.aliyuncs.com/%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95%E7%BB%93%E6%9E%84%E5%9B%BE.png" alt></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.junit.jupiter.api.Test; <span class="comment">//注意这里使用的是jupiter的Test注解！！@DisplayName("junit5功能测试类")public class Junit5Test &#123;    //规定方法超时间，超出时间测试出异常    @Timeout(value = 500,unit = TimeUnit.MILLISECONDS)    @Test    @DisplayName("测试displayname注解")    void testDisplayName() throws InterruptedException &#123;//        Thread.sleep(600);        System.out.println(1);    &#125;    @Test    @DisplayName("测试方法2")    @RepeatedTest(2)    void test2()&#123;        System.out.println(2);    &#125;    @BeforeEach    void testBeforeEach()&#123;        System.out.println("测试就要开始了...");    &#125;    @AfterEach    void testAfterEach()&#123;        System.out.println("测试结束了...");    &#125;    @BeforeAll    static void testBeforeAll()&#123;        System.out.println("所有的测试就要开始了...");    &#125;    @AfterAll    static void testAfterAll()&#123;        System.out.println("所有测试已经结束了...");    &#125;&#125;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//结果所有的测试就要开始了...测试就要开始了...2测试结束了...测试就要开始了...2测试结束了...测试就要开始了...1测试结束了...所有测试已经结束了...</span></span><br></pre></td></tr></table></figure>

<h2 id="断言（assertions）"><a href="#断言（assertions）" class="headerlink" title="断言（assertions）"></a>断言（assertions）</h2><p>断言（assertions）是测试方法中的核心部分，用来对测试需要满足的条件进行验证。<strong>这些断言方法都是 org.junit.jupiter.api.Assertions 的静态方法</strong>。JUnit 5 内置的断言可以分成如下几个类别：</p>
<p><strong>检查业务逻辑返回的数据是否合理。</strong></p>
<p><strong>所有的测试运行结束以后，会有一个详细的测试报告；</strong></p>
<p><strong>注意：</strong></p>
<p>如果前面代码前面断言失败，后面的代码都不会执行</p>
<h3 id="1、简单断言"><a href="#1、简单断言" class="headerlink" title="1、简单断言"></a>1、简单断言</h3><p>用来对单个值进行简单的验证。如：</p>
<table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>assertEquals</td>
<td>判断两个对象或两个原始类型是否相等</td>
</tr>
<tr>
<td>assertNotEquals</td>
<td>判断两个对象或两个原始类型是否不相等</td>
</tr>
<tr>
<td>assertSame</td>
<td>判断两个对象引用是否指向同一个对象</td>
</tr>
<tr>
<td>assertNotSame</td>
<td>判断两个对象引用是否指向不同的对象</td>
</tr>
<tr>
<td>assertTrue</td>
<td>判断给定的布尔值是否为 true</td>
</tr>
<tr>
<td>assertFalse</td>
<td>判断给定的布尔值是否为 false</td>
</tr>
<tr>
<td>assertNull</td>
<td>判断给定的对象引用是否为 null</td>
</tr>
<tr>
<td>assertNotNull</td>
<td>判断给定的对象引用是否不为 null</td>
</tr>
</tbody></table>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span><span class="meta">@DisplayName</span>(<span class="string">"简单断言"</span>)<span class="function"><span class="keyword">void</span> <span class="title">testSimpleAssertions</span><span class="params">()</span></span>&#123;    <span class="keyword">int</span> cal = cal(<span class="number">2</span>, <span class="number">3</span>);    <span class="comment">//普通值的比较    assertEquals(6,cal,"业务逻辑计算失败");    Object obj01 = new Object();    Object obj02 = new Object();    //对象引用是否指向同一对象    assertSame(obj01,obj02,"两个对象不一样");&#125;int cal(int i, int j)&#123;    return i + j;&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="2-数据断言"><a href="#2-数据断言" class="headerlink" title="2 数据断言"></a>2 数据断言</h3><p>通过 assertArrayEquals 方法来判断两个对象或原始类型的数组里面的<strong>值</strong>是否相等</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span><span class="meta">@DisplayName</span>(<span class="string">"array assertion"</span>)<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">array</span><span class="params">()</span> </span>&#123; assertArrayEquals(<span class="keyword">new</span> <span class="keyword">int</span>[]&#123;<span class="number">1</span>, <span class="number">2</span>&#125;, <span class="keyword">new</span> <span class="keyword">int</span>[] &#123;<span class="number">1</span>, <span class="number">2</span>&#125;);&#125;</span><br></pre></td></tr></table></figure>

<h3 id="组合断言"><a href="#组合断言" class="headerlink" title="组合断言"></a>组合断言</h3><p>assertAll 方法接受多个 org.junit.jupiter.api.Executable 函数式接口的实例作为要验证的断言，可以通过 lambda 表达式很容易的提供这些断言</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span><span class="meta">@DisplayName</span>(<span class="string">"组合断言"</span>)<span class="function"><span class="keyword">void</span> <span class="title">all</span><span class="params">()</span> </span>&#123;    <span class="comment">/*    * 所有断言全部需要成功    * */</span>    assertAll(<span class="string">"test"</span>,            ()-&gt; assertTrue(<span class="keyword">true</span> &amp;&amp; <span class="keyword">true</span>,<span class="string">"结果不为true"</span>),            ()-&gt; assertEquals(<span class="number">1</span>,<span class="number">2</span>,<span class="string">"结果错误"</span>));&#125;</span><br></pre></td></tr></table></figure>

<h2 id="异常断言"><a href="#异常断言" class="headerlink" title="异常断言"></a>异常断言</h2><p>在JUnit4时期，想要测试方法的异常情况时，需要用<strong>@Rule</strong>注解的ExpectedException变量还是比较麻烦的。而JUnit5提供了一种新的断言方式<strong>Assertions.assertThrows()</strong> ,配合函数式编程就可以进行使用。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span>    <span class="meta">@DisplayName</span>(<span class="string">"异常测试"</span>)    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">exceptionTest</span><span class="params">()</span> </span>&#123;        <span class="comment">//断定业务逻辑一定出现异常        assertThrows(ArithmeticException.class, () -&gt; &#123;            int i = 10/0;        &#125;,"业务逻辑居然正常运行?");    &#125;</span></span><br></pre></td></tr></table></figure>

<h2 id="超时断言"><a href="#超时断言" class="headerlink" title="超时断言"></a>超时断言</h2><p>Junit5还提供了<strong>Assertions.assertTimeout()</strong> 为测试方法设置了超时时间</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span><span class="meta">@DisplayName</span>(<span class="string">"超时测试"</span>)<span class="function"><span class="keyword">void</span> <span class="title">timeoutTest</span><span class="params">()</span> </span>&#123;    <span class="comment">//如果测试方法时间超过1s将会异常    Assertions.assertTimeout(Duration.ofMillis(1000), () -&gt; Thread.sleep(500));&#125;</span></span><br></pre></td></tr></table></figure>

<h2 id="6、快速失败"><a href="#6、快速失败" class="headerlink" title="6、快速失败"></a>6、快速失败</h2><p>通过 fail 方法直接使得测试失败</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span><span class="meta">@DisplayName</span>(<span class="string">"快速失败"</span>)<span class="function"><span class="keyword">void</span> <span class="title">shouldFail</span><span class="params">()</span> </span>&#123;    <span class="keyword">if</span>(<span class="number">1</span> == <span class="number">1</span>)&#123;        fail(<span class="string">"快速失败"</span>);    &#125; &#125;</span><br></pre></td></tr></table></figure>

<h3 id="前置条件（assumptions）"><a href="#前置条件（assumptions）" class="headerlink" title="前置条件（assumptions）"></a>前置条件（assumptions）</h3><p>JUnit 5 中的前置条件（<strong>assumptions【假设】</strong>）类似于断言，不同之处在于<strong>不满足的断言会使得测试方法失败</strong>，而不满足的<strong>前置条件只会使得测试方法的执行终止</strong>。前置条件可以看成是测试方法执行的前提，当该前提不满足时，就没有继续执行的必要。</p>
<h3 id="嵌套测试"><a href="#嵌套测试" class="headerlink" title="嵌套测试"></a>嵌套测试</h3><p>JUnit 5 可以通过 Java 中的内部类和@Nested 注解实现嵌套测试，从而可以更好的把相关的测试方法组织在一起。在内部类中可以使用@BeforeEach 和@AfterEach 注解，而且嵌套的层次没有限制。</p>
<h1 id="参数化测试"><a href="#参数化测试" class="headerlink" title="参数化测试"></a>参数化测试</h1><p>参数化测试是JUnit5很重要的一个新特性，它使得用不同的参数多次运行测试成为了可能，也为我们的单元测试带来许多便利。</p>
<p>利用<strong>@ValueSource</strong>等注解，指定入参，我们将可以使用不同的参数进行多次单元测试，而不需要每新增一个参数就新增一个单元测试，省去了很多冗余代码。</p>
<p><strong>@ValueSource</strong>: 为参数化测试指定入参来源，支持八大基础类以及String类型,Class类型</p>
<p><strong>@NullSource</strong>: 表示为参数化测试提供一个null的入参</p>
<p><strong>@EnumSource</strong>: 表示为参数化测试提供一个枚举入参</p>
<p><strong>@CsvFileSource</strong>：表示读取指定CSV文件内容作为参数化测试入参</p>
<p><strong>@MethodSource</strong>：表示读取指定方法的返回值作为参数化测试入参(注意方法返回需要是一个流)</p>
<blockquote>
<p>当然如果参数化测试仅仅只能做到指定普通的入参还达不到让我觉得惊艳的地步。让我真正感到他的强大之处的地方在于他可以支持外部的各类入参。如:CSV,YML,JSON 文件甚至方法的返回值也可以作为入参。只需要去实现<strong>ArgumentsProvider</strong>接口，任何外部文件都可以作为它的入参。</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ParameterizedTest</span><span class="meta">@ValueSource</span>(strings = &#123;<span class="string">"one"</span>, <span class="string">"two"</span>, <span class="string">"three"</span>&#125;)<span class="meta">@DisplayName</span>(<span class="string">"参数化测试1"</span>)<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">parameterizedTest1</span><span class="params">(String string)</span> </span>&#123;    System.out.println(string);    Assertions.assertTrue(StringUtils.isNotBlank(string));&#125;<span class="meta">@ParameterizedTest</span><span class="meta">@MethodSource</span>(<span class="string">"method"</span>)    <span class="comment">//指定方法名@DisplayName("方法来源参数")public void testWithExplicitLocalMethodSource(String name) &#123;    System.out.println(name);    Assertions.assertNotNull(name);&#125;static Stream&lt;String&gt; method() &#123;    return Stream.of("apple", "banana");&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="指标监控"><a href="#指标监控" class="headerlink" title="指标监控"></a>指标监控</h3><h4 id="1、SpringBoot-Actuator"><a href="#1、SpringBoot-Actuator" class="headerlink" title="1、SpringBoot Actuator"></a>1、SpringBoot Actuator</h4><h4 id="1、简介"><a href="#1、简介" class="headerlink" title="1、简介"></a>1、简介</h4><p>未来每一个微服务在云上部署以后，我们都需要对其进行监控、追踪、审计、控制等。SpringBoot就抽取了Actuator场景，使得我们每个微服务快速引用即可获得生产级别的应用监控、审计等功能。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span>    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span>    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-actuator<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="如何使用"><a href="#如何使用" class="headerlink" title="如何使用"></a>如何使用</h2><ul>
<li>引入场景</li>
<li>访问 <a href="http://localhost:8080/actuator/" target="_blank" rel="noopener">http://localhost:8080/actuator/</a>**</li>
<li>暴露所有监控信息为HTTP</li>
</ul>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">management:  endpoints:    enabled-by-default:</span> <span class="literal">true</span> <span class="comment">#暴露所有端点信息    web:      exposure:        include: '*'  #以web方式暴露</span></span><br></pre></td></tr></table></figure>

<ul>
<li>测试</li>
</ul>
<p><a href="http://localhost:8080/actuator/beans" target="_blank" rel="noopener">http://localhost:8080/actuator/beans</a></p>
<p><a href="http://localhost:8080/actuator/configprops" target="_blank" rel="noopener">http://localhost:8080/actuator/configprops</a></p>
<p><a href="http://localhost:8080/actuator/metrics" target="_blank" rel="noopener">http://localhost:8080/actuator/metrics</a></p>
<p><a href="http://localhost:8080/actuator/metrics/jvm.gc.pause" target="_blank" rel="noopener">http://localhost:8080/actuator/metrics/jvm.gc.pause</a></p>
<p><a href="http://localhost:8080/actuator/metrics" target="_blank" rel="noopener">http://localhost:8080/actuator/</a>endpointName/detailPath</p>
<h1 id="Actuator-Endpoint"><a href="#Actuator-Endpoint" class="headerlink" title="Actuator Endpoint"></a>Actuator Endpoint</h1><h2 id="1、最常使用的端点"><a href="#1、最常使用的端点" class="headerlink" title="1、最常使用的端点"></a>1、最常使用的端点</h2><table>
<thead>
<tr>
<th>ID</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td><code>auditevents</code></td>
<td>暴露当前应用程序的审核事件信息。需要一个<code>AuditEventRepository组件</code>。</td>
</tr>
<tr>
<td><code>beans</code></td>
<td>显示应用程序中所有Spring Bean的完整列表。</td>
</tr>
<tr>
<td><code>caches</code></td>
<td>暴露可用的缓存。</td>
</tr>
<tr>
<td><code>conditions</code></td>
<td>显示自动配置的所有条件信息，包括匹配或不匹配的原因。</td>
</tr>
<tr>
<td><code>configprops</code></td>
<td>显示所有<code>@ConfigurationProperties</code>。</td>
</tr>
<tr>
<td><code>env</code></td>
<td>暴露Spring的属性<code>ConfigurableEnvironment</code></td>
</tr>
<tr>
<td><code>flyway</code></td>
<td>显示已应用的所有Flyway数据库迁移。 需要一个或多个<code>Flyway</code>组件。</td>
</tr>
<tr>
<td><code>health</code></td>
<td>显示应用程序运行状况信息。</td>
</tr>
<tr>
<td><code>httptrace</code></td>
<td>显示HTTP跟踪信息（默认情况下，最近100个HTTP请求-响应）。需要一个<code>HttpTraceRepository</code>组件。</td>
</tr>
<tr>
<td><code>info</code></td>
<td>显示应用程序信息。</td>
</tr>
<tr>
<td><code>integrationgraph</code></td>
<td>显示Spring <code>integrationgraph</code> 。需要依赖<code>spring-integration-core</code>。</td>
</tr>
<tr>
<td><code>loggers</code></td>
<td>显示和修改应用程序中日志的配置。</td>
</tr>
<tr>
<td><code>liquibase</code></td>
<td>显示已应用的所有Liquibase数据库迁移。需要一个或多个<code>Liquibase</code>组件。</td>
</tr>
<tr>
<td><code>metrics</code></td>
<td>显示当前应用程序的“指标”信息。</td>
</tr>
<tr>
<td><code>mappings</code></td>
<td>显示所有<code>@RequestMapping</code>路径列表。</td>
</tr>
<tr>
<td><code>scheduledtasks</code></td>
<td>显示应用程序中的计划任务。</td>
</tr>
<tr>
<td><code>sessions</code></td>
<td>允许从Spring Session支持的会话存储中检索和删除用户会话。需要使用Spring Session的基于Servlet的Web应用程序。</td>
</tr>
<tr>
<td><code>shutdown</code></td>
<td>使应用程序正常关闭。默认禁用。</td>
</tr>
<tr>
<td><code>startup</code></td>
<td>显示由<code>ApplicationStartup</code>收集的启动步骤数据。需要使用<code>SpringApplication</code>进行配置<code>BufferingApplicationStartup</code>。</td>
</tr>
<tr>
<td><code>threaddump</code></td>
<td>执行线程转储。</td>
</tr>
</tbody></table>
<p>如果您的应用程序是Web应用程序（Spring MVC，Spring WebFlux或Jersey），则可以使用以下附加端点：</p>
<table>
<thead>
<tr>
<th>ID</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td><code>heapdump</code></td>
<td>返回<code>hprof</code>堆转储文件。</td>
</tr>
<tr>
<td><code>jolokia</code></td>
<td>通过HTTP暴露JMX bean（需要引入Jolokia，不适用于WebFlux）。需要引入依赖<code>jolokia-core</code>。</td>
</tr>
<tr>
<td><code>logfile</code></td>
<td>返回日志文件的内容（如果已设置<code>logging.file.name</code>或<code>logging.file.path</code>属性）。支持使用HTTP<code>Range</code>标头来检索部分日志文件的内容。</td>
</tr>
<tr>
<td><code>prometheus</code></td>
<td>以Prometheus服务器可以抓取的格式公开指标。需要依赖<code>micrometer-registry-prometheus</code>。</td>
</tr>
</tbody></table>
<p>最常用的Endpoint</p>
<ul>
<li><strong>Health：监控状况</strong></li>
<li><strong>Metrics：运行时指标</strong></li>
<li><strong>Loggers：日志记录</strong></li>
</ul>
<h2 id="2、Health-Endpoint"><a href="#2、Health-Endpoint" class="headerlink" title="2、Health Endpoint"></a>2、Health Endpoint</h2><p>健康检查端点，我们一般用于在云平台，平台会定时的检查应用的健康状况，我们就需要Health Endpoint可以为平台返回当前应用的一系列组件健康状况的集合。</p>
<p>重要的几点：</p>
<ul>
<li>health endpoint返回的结果，应该是一系列健康检查后的一个汇总报告，所有的组件健康才返回健康(up)</li>
<li>很多的健康检查默认已经自动配置好了，比如：数据库、redis等</li>
<li>可以很容易的添加自定义的健康检查机制</li>
</ul>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">management:  endpoints:    enabled-by-default:</span> <span class="literal">true</span> <span class="comment">#暴露所有端点信息    web:      exposure:        include: '*'  #以web方式暴露  endpoint:    health:      show-details: always # 这样才能开启详细信息</span></span><br></pre></td></tr></table></figure>

<h3 id="Metrics-Endpoint"><a href="#Metrics-Endpoint" class="headerlink" title="Metrics Endpoint"></a>Metrics Endpoint</h3><p>提供详细的、层级的、空间指标信息，这些信息可以被pull（主动推送）或者push（被动获取）方式得到；</p>
<ul>
<li>通过Metrics对接多种监控系统</li>
<li>简化核心Metrics开发</li>
<li>添加自定义Metrics或者扩展已有Metrics</li>
</ul>
<h2 id="管理Endpoints"><a href="#管理Endpoints" class="headerlink" title="管理Endpoints"></a>管理Endpoints</h2><h3 id="1、开启与禁用Endpoints"><a href="#1、开启与禁用Endpoints" class="headerlink" title="1、开启与禁用Endpoints"></a>1、开启与禁用Endpoints</h3><ul>
<li>默认所有的Endpoint除过shutdown都是开启的。</li>
<li>需要开启或者禁用某个Endpoint。配置模式为  <strong>management.endpoint.**</strong><endpointname><strong>**.enabled = true</strong></endpointname></li>
</ul>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">management:  endpoint:    beans:      enabled:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>

<ul>
<li>或者禁用所有的Endpoint然后手动开启指定的Endpoint</li>
</ul>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">management:  endpoints:    enabled-by-default: false  endpoint:    beans:      enabled: true    health:      enabled:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>

<h3 id="暴露Endpoints"><a href="#暴露Endpoints" class="headerlink" title="暴露Endpoints"></a>暴露Endpoints</h3><p>支持的暴露方式</p>
<ul>
<li>HTTP：默认只暴露<strong>health</strong>和<strong>info</strong> Endpoint</li>
<li><strong>JMX</strong>：默认暴露所有Endpoint</li>
<li>除过health和info，剩下的Endpoint都应该进行保护访问。如果引入SpringSecurity，则会默认配置安全访问规则</li>
</ul>
<table>
<thead>
<tr>
<th>ID</th>
<th>JMX</th>
<th>Web</th>
</tr>
</thead>
<tbody><tr>
<td><code>auditevents</code></td>
<td>Yes</td>
<td>No</td>
</tr>
<tr>
<td><code>beans</code></td>
<td>Yes</td>
<td>No</td>
</tr>
<tr>
<td><code>caches</code></td>
<td>Yes</td>
<td>No</td>
</tr>
<tr>
<td><code>conditions</code></td>
<td>Yes</td>
<td>No</td>
</tr>
<tr>
<td><code>configprops</code></td>
<td>Yes</td>
<td>No</td>
</tr>
<tr>
<td><code>env</code></td>
<td>Yes</td>
<td>No</td>
</tr>
<tr>
<td><code>flyway</code></td>
<td>Yes</td>
<td>No</td>
</tr>
<tr>
<td><code>health</code></td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr>
<td><code>heapdump</code></td>
<td>N/A</td>
<td>No</td>
</tr>
<tr>
<td><code>httptrace</code></td>
<td>Yes</td>
<td>No</td>
</tr>
<tr>
<td><code>info</code></td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr>
<td><code>integrationgraph</code></td>
<td>Yes</td>
<td>No</td>
</tr>
<tr>
<td><code>jolokia</code></td>
<td>N/A</td>
<td>No</td>
</tr>
<tr>
<td><code>logfile</code></td>
<td>N/A</td>
<td>No</td>
</tr>
<tr>
<td><code>loggers</code></td>
<td>Yes</td>
<td>No</td>
</tr>
<tr>
<td><code>liquibase</code></td>
<td>Yes</td>
<td>No</td>
</tr>
<tr>
<td><code>metrics</code></td>
<td>Yes</td>
<td>No</td>
</tr>
<tr>
<td><code>mappings</code></td>
<td>Yes</td>
<td>No</td>
</tr>
<tr>
<td><code>prometheus</code></td>
<td>N/A</td>
<td>No</td>
</tr>
<tr>
<td><code>scheduledtasks</code></td>
<td>Yes</td>
<td>No</td>
</tr>
<tr>
<td><code>sessions</code></td>
<td>Yes</td>
<td>No</td>
</tr>
<tr>
<td><code>shutdown</code></td>
<td>Yes</td>
<td>No</td>
</tr>
<tr>
<td><code>startup</code></td>
<td>Yes</td>
<td>No</td>
</tr>
<tr>
<td><code>threaddump</code></td>
<td>Yes</td>
<td>No</td>
</tr>
</tbody></table>
<h1 id="定制-Endpoint"><a href="#定制-Endpoint" class="headerlink" title="定制 Endpoint"></a>定制 Endpoint</h1><h2 id="1、定制-Health-信息"><a href="#1、定制-Health-信息" class="headerlink" title="1、定制 Health 信息"></a>1、定制 Health 信息</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.boot.actuate.health.Health;<span class="keyword">import</span> org.springframework.boot.actuate.health.HealthIndicator;<span class="keyword">import</span> org.springframework.stereotype.Component;<span class="meta">@Componentpublic</span> <span class="class"><span class="keyword">class</span> <span class="title">MyHealthIndicator</span> <span class="keyword">implements</span> <span class="title">HealthIndicator</span> </span>&#123;    <span class="meta">@Override</span>    <span class="function"><span class="keyword">public</span> Health <span class="title">health</span><span class="params">()</span> </span>&#123;        <span class="keyword">int</span> errorCode = check(); <span class="comment">// perform some specific health check        if (errorCode != 0) &#123;            return Health.down().withDetail("Error Code", errorCode).build();        &#125;        return Health.up().build();    &#125;&#125;//构建HealthHealth build = Health.down()                .withDetail("msg", "error service")                .withDetail("code", "500")                .withException(new RuntimeException())                .build();</span></span><br></pre></td></tr></table></figure>

<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">management:    health:      enabled: true      show-details:</span> <span class="string">always</span> <span class="comment">#总是显示详细信息。可显示每个模块的状态信息</span></span><br></pre></td></tr></table></figure>

<p>法2：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Componentpublic</span> <span class="class"><span class="keyword">class</span> <span class="title">MyComHealthIndicator</span> <span class="keyword">extends</span> <span class="title">AbstractHealthIndicator</span> </span>&#123;    <span class="comment">/**     * 真实的检查方法     * <span class="doctag">@param</span> builder     * <span class="doctag">@throws</span> Exception     */</span>    <span class="meta">@Override</span>    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doHealthCheck</span><span class="params">(Health.Builder builder)</span> <span class="keyword">throws</span> Exception </span>&#123;        <span class="comment">//mongodb。  获取连接进行测试        Map&lt;String,Object&gt; map = new HashMap&lt;&gt;();        // 检查完成        if(1 == 2)&#123;//            builder.up(); //健康            builder.status(Status.UP);            map.put("count",1);            map.put("ms",100);        &#125;else &#123;//            builder.down();            builder.status(Status.OUT_OF_SERVICE);            map.put("err","连接超时");            map.put("ms",3000);        &#125;        builder.withDetail("code",100)                .withDetails(map);    &#125;&#125;</span></span><br></pre></td></tr></table></figure>

<h2 id="定制info信息"><a href="#定制info信息" class="headerlink" title="定制info信息"></a>定制info信息</h2><p>常用两种方式</p>
<h4 id="1、编写配置文件"><a href="#1、编写配置文件" class="headerlink" title="1、编写配置文件"></a>1、编写配置文件</h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">info:  appName: boot-admin  version: 2.0.1  mavenProjectName:</span> <span class="string">@project.artifactId@</span>  <span class="comment">#使用@@可以获取maven的pom文件值  mavenProjectVersion: @project.version@</span></span><br></pre></td></tr></table></figure>

<h4 id="2、编写InfoContributor"><a href="#2、编写InfoContributor" class="headerlink" title="2、编写InfoContributor"></a>2、编写InfoContributor</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Collections;<span class="keyword">import</span> org.springframework.boot.actuate.info.Info;<span class="keyword">import</span> org.springframework.boot.actuate.info.InfoContributor;<span class="keyword">import</span> org.springframework.stereotype.Component;<span class="meta">@Componentpublic</span> <span class="class"><span class="keyword">class</span> <span class="title">ExampleInfoContributor</span> <span class="keyword">implements</span> <span class="title">InfoContributor</span> </span>&#123;    <span class="meta">@Override</span>    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">contribute</span><span class="params">(Info.Builder builder)</span> </span>&#123;        builder.withDetail(<span class="string">"example"</span>,                Collections.singletonMap(<span class="string">"key"</span>, <span class="string">"value"</span>));    &#125;&#125;</span><br></pre></td></tr></table></figure>

<h2 id="定制Metrics信息"><a href="#定制Metrics信息" class="headerlink" title="定制Metrics信息"></a>定制Metrics信息</h2><h4 id="1、SpringBoot支持自动适配的Metrics"><a href="#1、SpringBoot支持自动适配的Metrics" class="headerlink" title="1、SpringBoot支持自动适配的Metrics"></a>1、SpringBoot支持自动适配的Metrics</h4><ul>
<li><p>JVM metrics, report utilization of:</p>
</li>
<li><ul>
<li>Various memory and buffer pools</li>
<li>Statistics related to garbage collection</li>
<li>Threads utilization</li>
<li>Number of classes loaded/unloaded</li>
</ul>
</li>
<li><p>CPU metrics</p>
</li>
<li><p>File descriptor metrics</p>
</li>
<li><p>Kafka consumer and producer metrics</p>
</li>
<li><p>Log4j2 metrics: record the number of events logged to Log4j2 at each level</p>
</li>
<li><p>Logback metrics: record the number of events logged to Logback at each level</p>
</li>
<li><p>Uptime metrics: report a gauge for uptime and a fixed gauge representing the application’s absolute start time</p>
</li>
<li><p>Tomcat metrics (<code>server.tomcat.mbeanregistry.enabled</code> must be set to <code>true</code> for all Tomcat metrics to be registered)</p>
</li>
<li><p><a href="https://docs.spring.io/spring-integration/docs/5.4.1/reference/html/system-management.html#micrometer-integration" target="_blank" rel="noopener">Spring Integration</a> metrics</p>
</li>
</ul>
<h4 id="2、增加定制Metrics"><a href="#2、增加定制Metrics" class="headerlink" title="2、增加定制Metrics"></a>2、增加定制Metrics</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyService</span></span>&#123;    Counter counter;    <span class="function"><span class="keyword">public</span> <span class="title">MyService</span><span class="params">(MeterRegistry meterRegistry)</span></span>&#123;         counter = meterRegistry.counter(<span class="string">"myservice.method.running.counter"</span>);    &#125;    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">hello</span><span class="params">()</span> </span>&#123;        counter.increment();    &#125;&#125;<span class="comment">//也可以使用下面的方式@BeanMeterBinder queueSize(Queue queue) &#123;    return (registry) -&gt; Gauge.builder("queueSize", queue::size).register(registry);&#125;</span></span><br></pre></td></tr></table></figure>

<h2 id="4、定制Endpoint"><a href="#4、定制Endpoint" class="headerlink" title="4、定制Endpoint"></a>4、定制Endpoint</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span><span class="meta">@Endpoint</span>(id = <span class="string">"container"</span>)<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DockerEndpoint</span> </span>&#123;    <span class="meta">@ReadOperation</span>    <span class="function"><span class="keyword">public</span> Map <span class="title">getDockerInfo</span><span class="params">()</span></span>&#123;        <span class="keyword">return</span> Collections.singletonMap(<span class="string">"info"</span>,<span class="string">"docker started..."</span>);    &#125;    <span class="meta">@WriteOperation</span>    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">restartDocker</span><span class="params">()</span></span>&#123;        System.out.println(<span class="string">"docker restarted...."</span>);    &#125;&#125;</span><br></pre></td></tr></table></figure>

<p>场景：开发<strong>ReadinessEndpoint</strong>来管理程序是否就绪，或者<strong>Liveness**</strong>Endpoint**来管理程序是否存活；</p>
<p>当然，这个也可以直接使用 <a href="https://docs.spring.io/spring-boot/docs/current/reference/html/production-ready-features.html#production-ready-kubernetes-probes" target="_blank" rel="noopener">https://docs.spring.io/spring-boot/docs/current/reference/html/production-ready-features.html#production-ready-kubernetes-probes</a></p>

      <blockquote class="mdui-m-t-5">
        
          <strong>本文遵循 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank">CC BY-NC-SA 4.0</a> 许可协议，转载请附上原文出处链接和本声明。</strong><br>
        
        <strong>本文链接：</strong><a href="https://yellowbp.github.io/2021/05/08/SpringBoot2/">https://yellowbp.github.io/2021/05/08/SpringBoot2/</a>
      </blockquote>
      
    </div>
    <footer class="mdui-card-actions">
      
        <a class="mdui-ripple article_categories-link" href="/categories/技术/">技术</a>
      
      
        <a class="mdui-ripple article_tags-link" href="/tags/Spring/">Spring</a>
      
    </footer>
    
  </article>
  <script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>
<script src="https://cdn.bootcss.com/fancybox/3.5.7/jquery.fancybox.min.js"></script>
  <script>$("#main article .mdui-card-content img.fancybox").on("click",function(e){$.fancybox.open({src:$(this).attr("src")});});</script>


  <nav id="paginator">
    
      <a rel="prev" class="extend prev" href="/2021/05/08/Swagger2/">
        <button aria-label="prev" class="mdui-btn mdui-btn-raised mdui-btn-dense mdui-btn-icon mdui-color-theme-accent mdui-ripple"><i class="mdui-icon material-icons">arrow_back</i></button>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;上一篇
      </a>
    
    <div class="spacer"></div>
    
      <a rel="next" class="extend next" href="/2021/05/07/常用开发软件的个人偏好设置/">
        下一篇&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        <button aria-label="next" class="mdui-btn mdui-btn-raised mdui-btn-dense mdui-btn-icon mdui-color-theme-accent mdui-ripple"><i class="mdui-icon material-icons">arrow_forward</i></button>
      </a>
    
  </nav>


  <div id="comment" class="mdui-m-t-5">
    <style>#pop_ad,#feedAv{display:none!important;position:absolute!important;z-index:-9999;left:-1000px;opacity:0!important}</style>
<div id="SOHUCS" sid="ckrq6fv9v005uogtwvvzwmyrz"></div>
<script type="text/javascript">
(function(){
var appid = 'cyubhC2Dq';
var conf = 'prod_e4cce65003c5bed049fefcb8a6f09e12';
var width = window.innerWidth || document.documentElement.clientWidth;
if (width < 960) {
window.document.write('<script id="changyan_mobile_js" charset="utf-8" type="text/javascript" src="http://changyan.sohu.com/upload/mobile/wap-js/changyan_mobile.js?client_id=' + appid + '&conf=' + conf + '"><\/script>'); } else { var loadJs=function(d,a){var c=document.getElementsByTagName("head")[0]||document.head||document.documentElement;var b=document.createElement("script");b.setAttribute("type","text/javascript");b.setAttribute("charset","UTF-8");b.setAttribute("src",d);if(typeof a==="function"){if(window.attachEvent){b.onreadystatechange=function(){var e=b.readyState;if(e==="loaded"||e==="complete"){b.onreadystatechange=null;a()}}}else{b.onload=a}}c.appendChild(b)};loadJs("http://changyan.sohu.com/upload/changyan.js",function(){window.changyan.api.config({appid:appid,conf:conf})}); } })(); </script>
  </div>



  <div style="position: fixed !important; right: 16px; top: 30%;">
    <button class="mdui-fab mdui-fab-mini mdui-ripple" mdui-menu="{target: '#toc'}"><i class="mdui-icon material-icons">format_list_numbered</i></button>
    <ul class="mdui-menu" id="toc">
      <li class="mdui-menu-item" disabled><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#SpringBoot2"><span class="toc-number">1.</span> <span class="toc-text">SpringBoot2</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#环境要求"><span class="toc-number">1.1.</span> <span class="toc-text">环境要求</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#什么是SpringBoot"><span class="toc-number">1.2.</span> <span class="toc-text">什么是SpringBoot</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#SpringBoot优点"><span class="toc-number">1.3.</span> <span class="toc-text">SpringBoot优点</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#SpringBoot缺点"><span class="toc-number">1.4.</span> <span class="toc-text">SpringBoot缺点</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#HelloWorld-Demo"><span class="toc-number">1.5.</span> <span class="toc-text">HelloWorld-Demo</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#maven设置"><span class="toc-number">1.5.1.</span> <span class="toc-text">maven设置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#需求：浏览发送-hello请求，响应-Hello，Spring-Boot-2"><span class="toc-number">1.5.2.</span> <span class="toc-text">需求：浏览发送/hello请求，响应 Hello，Spring Boot 2</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#项目创建"><span class="toc-number">1.5.3.</span> <span class="toc-text">项目创建</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#引入依赖"><span class="toc-number">1.5.4.</span> <span class="toc-text">引入依赖</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#创建主程序"><span class="toc-number">1.5.5.</span> <span class="toc-text">创建主程序</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#编写业务"><span class="toc-number">1.5.6.</span> <span class="toc-text">编写业务</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#测试"><span class="toc-number">1.5.7.</span> <span class="toc-text">测试</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#简化配置"><span class="toc-number">1.5.8.</span> <span class="toc-text">简化配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#简化部署"><span class="toc-number">1.5.9.</span> <span class="toc-text">简化部署</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#SpringBoot特点"><span class="toc-number">1.6.</span> <span class="toc-text">SpringBoot特点</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#依赖管理"><span class="toc-number">1.6.1.</span> <span class="toc-text">依赖管理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#自动配置"><span class="toc-number">1.6.2.</span> <span class="toc-text">自动配置</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#容器功能"><span class="toc-number">1.7.</span> <span class="toc-text">容器功能</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#组件的添加"><span class="toc-number">1.7.1.</span> <span class="toc-text">组件的添加</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Configuration"><span class="toc-number">1.7.1.1.</span> <span class="toc-text">@Configuration</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Bean、-Component、-Controller、-Service、-Repository"><span class="toc-number">1.7.1.2.</span> <span class="toc-text">@Bean、@Component、@Controller、@Service、@Repository</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ComponentScan、-Import"><span class="toc-number">1.7.1.3.</span> <span class="toc-text">@ComponentScan、@Import</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Conditional"><span class="toc-number">1.7.1.4.</span> <span class="toc-text">@Conditional</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#原生配置文件的引入"><span class="toc-number">1.7.2.</span> <span class="toc-text">原生配置文件的引入</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#ImportResource"><span class="toc-number">1.7.2.1.</span> <span class="toc-text">@ImportResource</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#配置绑定"><span class="toc-number">1.7.3.</span> <span class="toc-text">配置绑定</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Component-ConfigurationProperties-prefix-“xxx”"><span class="toc-number">1.7.3.1.</span> <span class="toc-text">@Component + @ConfigurationProperties(prefix = “xxx”)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#EnableConfigurationProperties-ConfigurationProperties-prefix-“xxx”"><span class="toc-number">1.7.3.2.</span> <span class="toc-text">@EnableConfigurationProperties + @ConfigurationProperties(prefix = “xxx”)</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#最佳实践"><span class="toc-number">1.8.</span> <span class="toc-text">最佳实践</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#配置文件"><span class="toc-number">1.9.</span> <span class="toc-text">配置文件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#文件类型"><span class="toc-number">1.9.1.</span> <span class="toc-text">文件类型</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#properties"><span class="toc-number">1.9.1.1.</span> <span class="toc-text">properties</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-2、yaml"><span class="toc-number">1.9.1.2.</span> <span class="toc-text">1.2、yaml</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-2-1、简介"><span class="toc-number">1.9.1.2.1.</span> <span class="toc-text">1.2.1、简介</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#1-2-2、基本语法"><span class="toc-number">1.9.1.2.2.</span> <span class="toc-text">1.2.2、基本语法</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#1-2-3、数据类型"><span class="toc-number">1.9.1.2.3.</span> <span class="toc-text">1.2.3、数据类型</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#1-2-4-示例"><span class="toc-number">1.9.1.2.4.</span> <span class="toc-text">1.2.4 示例</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#配置提示"><span class="toc-number">1.9.2.</span> <span class="toc-text">配置提示</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#简单功能分析"><span class="toc-number">1.10.</span> <span class="toc-text">简单功能分析</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#静态资源访问"><span class="toc-number">1.10.1.</span> <span class="toc-text">静态资源访问</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1、静态资源目录"><span class="toc-number">1.10.1.1.</span> <span class="toc-text">1、静态资源目录</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#欢迎页支持"><span class="toc-number">1.11.</span> <span class="toc-text">欢迎页支持</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3、自定义-Favicon"><span class="toc-number">1.11.1.</span> <span class="toc-text">2.3、自定义 Favicon</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#普通参数与基本注解"><span class="toc-number">1.12.</span> <span class="toc-text">普通参数与基本注解</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#注解："><span class="toc-number">1.12.1.</span> <span class="toc-text">注解：</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#视图解析与模板引擎"><span class="toc-number">1.13.</span> <span class="toc-text">视图解析与模板引擎</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#模板引擎-Thymeleaf"><span class="toc-number">1.13.0.1.</span> <span class="toc-text">模板引擎-Thymeleaf</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2、基本语法"><span class="toc-number">1.13.0.2.</span> <span class="toc-text">2、基本语法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#表达式"><span class="toc-number">1.13.0.3.</span> <span class="toc-text">表达式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#字面量"><span class="toc-number">1.13.0.4.</span> <span class="toc-text">字面量</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#文本操作"><span class="toc-number">1.13.0.5.</span> <span class="toc-text">文本操作</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#数学运算"><span class="toc-number">1.13.0.6.</span> <span class="toc-text">数学运算</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#布尔运算"><span class="toc-number">1.13.0.7.</span> <span class="toc-text">布尔运算</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#比较运算"><span class="toc-number">1.13.0.8.</span> <span class="toc-text">比较运算</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#条件运算"><span class="toc-number">1.13.0.9.</span> <span class="toc-text">条件运算</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#特殊操作"><span class="toc-number">1.13.0.10.</span> <span class="toc-text">特殊操作</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#设置属性值-th-attr"><span class="toc-number">1.13.0.11.</span> <span class="toc-text">设置属性值-th:attr</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#迭代"><span class="toc-number">1.13.0.12.</span> <span class="toc-text">迭代</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#条件运算-1"><span class="toc-number">1.13.0.13.</span> <span class="toc-text">条件运算</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#thymeleaf使用"><span class="toc-number">1.13.1.</span> <span class="toc-text">thymeleaf使用</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#引入starter"><span class="toc-number">1.13.1.1.</span> <span class="toc-text">引入starter</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#引入stater后，SpringBoot自动配置好了thymeleaf"><span class="toc-number">1.13.1.2.</span> <span class="toc-text">引入stater后，SpringBoot自动配置好了thymeleaf</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#页面开发"><span class="toc-number">1.13.2.</span> <span class="toc-text">页面开发</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#构建后台管理系统"><span class="toc-number">1.14.</span> <span class="toc-text">构建后台管理系统</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1、项目创建"><span class="toc-number">1.14.1.</span> <span class="toc-text">1、项目创建</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2、静态资源处理"><span class="toc-number">1.14.2.</span> <span class="toc-text">2、静态资源处理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3、路径构建"><span class="toc-number">1.14.3.</span> <span class="toc-text">3、路径构建</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4、模板抽取"><span class="toc-number">1.14.4.</span> <span class="toc-text">4、模板抽取</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5、页面跳转"><span class="toc-number">1.14.5.</span> <span class="toc-text">5、页面跳转</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#数据渲染"><span class="toc-number">1.14.6.</span> <span class="toc-text">数据渲染</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#拦截器"><span class="toc-number">1.14.7.</span> <span class="toc-text">拦截器</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#HandlerInterceptor-接口"><span class="toc-number">1.14.7.1.</span> <span class="toc-text">HandlerInterceptor 接口</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#文件上传"><span class="toc-number">1.14.8.</span> <span class="toc-text">文件上传</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#页面表单"><span class="toc-number">1.14.8.1.</span> <span class="toc-text">页面表单</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#文件上传代码"><span class="toc-number">1.14.8.2.</span> <span class="toc-text">文件上传代码</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#异常处理"><span class="toc-number">1.14.9.</span> <span class="toc-text">异常处理</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1、错误处理"><span class="toc-number">1.14.9.1.</span> <span class="toc-text">1、错误处理</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1、默认规则"><span class="toc-number">1.14.9.1.1.</span> <span class="toc-text">1、默认规则</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11、定制化原理"><span class="toc-number">1.14.10.</span> <span class="toc-text">11、定制化原理</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1、定制化的常见方式"><span class="toc-number">1.14.10.1.</span> <span class="toc-text">1、定制化的常见方式</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2、原理分析套路"><span class="toc-number">1.14.11.</span> <span class="toc-text">2、原理分析套路</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#数据访问"><span class="toc-number">1.15.</span> <span class="toc-text">数据访问</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#SQL"><span class="toc-number">1.15.1.</span> <span class="toc-text">SQL</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1、数据源的自动配置-HikariDataSource"><span class="toc-number">1.15.2.</span> <span class="toc-text">1、数据源的自动配置-HikariDataSource</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1、导入JDBC场景"><span class="toc-number">1.15.3.</span> <span class="toc-text">1、导入JDBC场景</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#修改配置项"><span class="toc-number">1.15.4.</span> <span class="toc-text">修改配置项</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#测试-1"><span class="toc-number">1.15.5.</span> <span class="toc-text">测试</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#使用Druid数据源"><span class="toc-number">1.15.6.</span> <span class="toc-text">使用Druid数据源</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1、druid官方github地址"><span class="toc-number">1.15.6.1.</span> <span class="toc-text">1、druid官方github地址</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2、自定义方式"><span class="toc-number">1.15.7.</span> <span class="toc-text">2、自定义方式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1、创建数据源"><span class="toc-number">1.15.7.1.</span> <span class="toc-text">1、创建数据源</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#自定义配置类"><span class="toc-number">1.15.7.2.</span> <span class="toc-text">自定义配置类</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2、StatViewServlet"><span class="toc-number">1.15.7.3.</span> <span class="toc-text">2、StatViewServlet</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#使用官方starter方式"><span class="toc-number">1.15.8.</span> <span class="toc-text">使用官方starter方式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#引入druid-starter"><span class="toc-number">1.15.8.1.</span> <span class="toc-text">引入druid-starter</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2、分析自动配置"><span class="toc-number">1.15.8.2.</span> <span class="toc-text">2、分析自动配置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3、配置示例"><span class="toc-number">1.15.8.3.</span> <span class="toc-text">3、配置示例</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3、整合MyBatis操作"><span class="toc-number">1.16.</span> <span class="toc-text">3、整合MyBatis操作</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1、配置模式"><span class="toc-number">1.16.1.</span> <span class="toc-text">1、配置模式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#混合模式-注解-配置模式"><span class="toc-number">1.16.2.</span> <span class="toc-text">混合模式(注解+配置模式)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4、整合-MyBatis-Plus-完成CRUD"><span class="toc-number">1.17.</span> <span class="toc-text">4、整合 MyBatis-Plus 完成CRUD</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1、什么是MyBatis-Plus"><span class="toc-number">1.17.1.</span> <span class="toc-text">1、什么是MyBatis-Plus</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2、整合MyBatis-Plus"><span class="toc-number">1.17.2.</span> <span class="toc-text">2、整合MyBatis-Plus</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#CRUD功能"><span class="toc-number">1.17.3.</span> <span class="toc-text">CRUD功能</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2、NoSQL"><span class="toc-number">2.</span> <span class="toc-text">2、NoSQL</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1、Redis自动配置"><span class="toc-number">2.1.</span> <span class="toc-text">1、Redis自动配置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2、RedisTemplate与Lettuce"><span class="toc-number">2.2.</span> <span class="toc-text">2、RedisTemplate与Lettuce</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3、切换至jedis"><span class="toc-number">2.3.</span> <span class="toc-text">3、切换至jedis</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#单元测试"><span class="toc-number">2.4.</span> <span class="toc-text">单元测试</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1、JUnit5-的变化"><span class="toc-number">2.4.1.</span> <span class="toc-text">1、JUnit5 的变化</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#JUnit5常用注解"><span class="toc-number">2.5.</span> <span class="toc-text">JUnit5常用注解</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#断言（assertions）"><span class="toc-number">2.6.</span> <span class="toc-text">断言（assertions）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1、简单断言"><span class="toc-number">2.6.1.</span> <span class="toc-text">1、简单断言</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-数据断言"><span class="toc-number">2.6.2.</span> <span class="toc-text">2 数据断言</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#组合断言"><span class="toc-number">2.6.3.</span> <span class="toc-text">组合断言</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#异常断言"><span class="toc-number">2.7.</span> <span class="toc-text">异常断言</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#超时断言"><span class="toc-number">2.8.</span> <span class="toc-text">超时断言</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6、快速失败"><span class="toc-number">2.9.</span> <span class="toc-text">6、快速失败</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#前置条件（assumptions）"><span class="toc-number">2.9.1.</span> <span class="toc-text">前置条件（assumptions）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#嵌套测试"><span class="toc-number">2.9.2.</span> <span class="toc-text">嵌套测试</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#参数化测试"><span class="toc-number">3.</span> <span class="toc-text">参数化测试</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#指标监控"><span class="toc-number">3.0.1.</span> <span class="toc-text">指标监控</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1、SpringBoot-Actuator"><span class="toc-number">3.0.1.1.</span> <span class="toc-text">1、SpringBoot Actuator</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1、简介"><span class="toc-number">3.0.1.2.</span> <span class="toc-text">1、简介</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#如何使用"><span class="toc-number">3.1.</span> <span class="toc-text">如何使用</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Actuator-Endpoint"><span class="toc-number">4.</span> <span class="toc-text">Actuator Endpoint</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1、最常使用的端点"><span class="toc-number">4.1.</span> <span class="toc-text">1、最常使用的端点</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2、Health-Endpoint"><span class="toc-number">4.2.</span> <span class="toc-text">2、Health Endpoint</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Metrics-Endpoint"><span class="toc-number">4.2.1.</span> <span class="toc-text">Metrics Endpoint</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#管理Endpoints"><span class="toc-number">4.3.</span> <span class="toc-text">管理Endpoints</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1、开启与禁用Endpoints"><span class="toc-number">4.3.1.</span> <span class="toc-text">1、开启与禁用Endpoints</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#暴露Endpoints"><span class="toc-number">4.3.2.</span> <span class="toc-text">暴露Endpoints</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#定制-Endpoint"><span class="toc-number">5.</span> <span class="toc-text">定制 Endpoint</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1、定制-Health-信息"><span class="toc-number">5.1.</span> <span class="toc-text">1、定制 Health 信息</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#定制info信息"><span class="toc-number">5.2.</span> <span class="toc-text">定制info信息</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1、编写配置文件"><span class="toc-number">5.2.0.1.</span> <span class="toc-text">1、编写配置文件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2、编写InfoContributor"><span class="toc-number">5.2.0.2.</span> <span class="toc-text">2、编写InfoContributor</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#定制Metrics信息"><span class="toc-number">5.3.</span> <span class="toc-text">定制Metrics信息</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1、SpringBoot支持自动适配的Metrics"><span class="toc-number">5.3.0.1.</span> <span class="toc-text">1、SpringBoot支持自动适配的Metrics</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2、增加定制Metrics"><span class="toc-number">5.3.0.2.</span> <span class="toc-text">2、增加定制Metrics</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4、定制Endpoint"><span class="toc-number">5.4.</span> <span class="toc-text">4、定制Endpoint</span></a></li></ol></li></ol></li>
    </ul>
  </div>
</main>
  <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js">
</script>
<footer id="footer" class="mdui-m-t-5 mdui-p-y-3 mdui-color-theme">
  <div class="mdui-p-y-0 mdui-text-center">
    
    
    
    
    
    
    
      <a href="https://github.com/yellowbp" target="_blank"><i class="mdui-p-a-1 mdui-icon iconfont mdui-text-color-theme-a100">&#xe7ab;</i></a>
    
    
    
    
    
      <a href="tencent://message/?uin=1432440963&Menu=yes" target="_blank"><i class="mdui-p-a-1 mdui-icon iconfont mdui-text-color-theme-a100">&#xe651;</i></a>
    
    
  </div>
  <div class="mdui-p-y-1 mdui-text-center">
    Copyright &copy; 2019 - 2021 hbp<br>
    Powered by <a href="https://hexo.io/" target="_blank" class="mdui-text-color-theme-accent">Hexo</a>hbp All rights reserved.
    
    <br>
    <span id="busuanzi_container_site_uv">
    本网站总访问量<span id="busuanzi_value_site_uv"></span>次
    </span>
  </div>
</footer>
  <button id="gotop" class="mdui-fab mdui-fab-fixed mdui-fab-hide mdui-ripple mdui-color-theme-accent"><i class="mdui-icon material-icons">arrow_upward</i></button>
  <script async src="http://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
  <script src="/js/mdui.js"></script>
<script src="/js/script.js"></script>
</body>
</html>